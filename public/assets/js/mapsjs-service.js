
/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.34.1/HERE_NOTICE
 */

H.util.eval("R.prototype.m=ca(3,function(a){var b=this.getCache(),c=this;if(a!==y){C(a,Pk,R.prototype.m,0);var d=a}else d=wl;d!==b&&b.ka(function(e,f,g){return c.Rb(e)?(d.add(e,f,g),!0):!1});this.T=d});qi.prototype.b=ca(2,function(a){this.g=a;a=this.getState();a!==Uh.INIT&&a!==Uh.LOADING&&xi(this)});function qp(a,b){Xa.apply(null,arguments);return a}function rp(a,b){var c=x.console;c&&c.warn&&(a=wc(a)+\" is deprecated and will be removed soon. \",b&&(a+=b),c.warn(a))}var sp=globalThis;sc(\"monospace serif\");\nfunction tp(){}tp.prototype.pop=function(a){this[a]||(this[a]=[]);return this[a].pop()||document.createElement(\"canvas\")};tp.prototype.push=function(a,b){this[b]||(this[b]=[]);this[b].push(a)};var up=new tp;t(\"H.service.util.eval\",function(a){return eval(a)});function U(a,b,c,d,e,f){if(a&&b)this.li(a),this.Te(b),this.sd(c),this.hi(e),this.Hk(f),this.eg(d);else throw new D(U,B,'Parameters \"scheme\" and \"host\" must be specified');}t(\"H.service.Url\",U);\nfunction vp(a,b){var c=x.document,d;var e=\"\";if(c){e=c.createElement(\"a\");if(b){var f=(d=c.getElementsByTagName(\"base\")[0])&&d.href;var g=c.head;var h=d||g.appendChild(c.createElement(\"base\"));h.href=b}e.href=a;e=e.href;b&&(d?d.href=f:g.removeChild(h))}else/[\\w]+:\\/\\//.test(a)&&(e=a);f=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(e);a=f[1];g=f[4];b=f[5];h=f[6];c=f[7];d=f[8];!f[2]&&g&&/@/.test(g)&&(g=g.split(\"@\")[1]);f=U;h=h&&0<h.length?h.substr(1):\n\"\";e={};var k,l;if(c)for(k=/([?&]?([^=&+]+))(=([^&]+))?/g;l=k.exec(c);)e[decodeURIComponent(l[2])]=l[4]?decodeURIComponent(l[4]):void 0;return new f(a,g,h,e,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):\"\")}U.parse=vp;U.prototype.clone=function(){var a={},b;for(b in this.a)a[b]=this.a[b];return new U(this.i,this.g,this.b,a,this.f,this.c)};U.prototype.clone=U.prototype.clone;\nU.prototype.li=function(a){if(!a||\"string\"!==typeof a)throw new D(this.li,0,'The \"scheme\" parameter must be a non-empty string.');this.i=a;return this};U.prototype.setScheme=U.prototype.li;U.prototype.Hm=function(){return this.i};U.prototype.getScheme=U.prototype.Hm;U.prototype.Te=function(a){if(!a||\"string\"!==typeof a||\"-\"===a.charAt(0)||\".\"===a.charAt(0)||\".\"===a.charAt(a.length-1))throw new D(this.Te,0,'The \"host\" parameter is not a valid host name.');this.g=a;return this};\nU.prototype.setHost=U.prototype.Te;U.prototype.cm=function(){return this.g};U.prototype.getHost=U.prototype.cm;U.prototype.sd=function(a){this.b=a||void 0;return this};U.prototype.setPath=U.prototype.sd;U.prototype.vm=function(){return this.b};U.prototype.getPath=U.prototype.vm;U.prototype.eg=function(a){if(a)if(\"object\"==typeof a)this.a=a;else throw new D(this.eg,0,'Parameter \"params\" must be an object.');else this.a={};return this};U.prototype.setQuery=U.prototype.eg;U.prototype.Fj=function(){return!wp(this)};\nU.prototype.hasQuery=U.prototype.Fj;U.prototype.getQuery=function(){return this.a};U.prototype.getQuery=U.prototype.getQuery;U.prototype.hi=function(a){if(void 0===a)this.f=a;else{var b=Zd(+a<<0,0,65535);if(b!=a)throw new D(this.hi,0,'Parameter \"port\" must be an integer in range [0...65535]');this.f=b}return this};U.prototype.setPort=U.prototype.hi;U.prototype.ym=function(){return this.f};U.prototype.getPort=U.prototype.ym;U.prototype.Hk=function(a){this.c=a||void 0;return this};\nU.prototype.setAnchor=U.prototype.Hk;U.prototype.ed=function(){return this.c};U.prototype.getAnchor=U.prototype.ed;U.prototype.G=function(a){if(\"object\"!==typeof a)throw new D(this.G,0,'Parameter \"other\" must be an object.');var b=this.a,c;for(c in a)a.hasOwnProperty(c)&&\"function\"!==typeof a[c]&&(b[c]=a[c]);return this};U.prototype.mergeQuery=U.prototype.G;\nU.prototype.za=function(a){if(!a||\"string\"!==typeof a)throw new D(this.za,0,'Parameter \"subDomain\" must be a non-empty string');\".\"===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.Te(a+\".\"+this.g)};U.prototype.addSubDomain=U.prototype.za;U.prototype.J=function(a){if(!a||\"string\"!==typeof a)throw new D(this.J,0,'Parameter \"subPath\" must be a non-empty string');return this.sd((this.b?this.b+\"/\":\"\")+a)};U.prototype.addSubPath=U.prototype.J;\nU.prototype.toString=function(){return[this.i+\"://\",this.g,this.f?\":\"+this.f:\"\",this.b||!wp(this)||this.c?\"/\":\"\",this.b?encodeURI(this.b):\"\",xp(this),this.c?\"#\"+encodeURIComponent(this.c):\"\"].join(\"\")};U.prototype.toString=U.prototype.toString;\nfunction xp(a){function b(g,h){return encodeURIComponent(g)+(void 0===h?\"\":\"=\"+encodeURIComponent(h).replace(/[!'()*]/g,function(k){return\"%\"+k.charCodeAt(0).toString(16)}))}var c=[],d,e=a.a;for(d in e)if(e.hasOwnProperty(d)&&\"function\"!==typeof e[d]){var f=a.a[d];C(f,yp)?f.a.forEach(function(g){c.push(b(d,g))}):c.push(b(d,f))}return 0<c.length?\"?\"+c.join(\"&\"):\"\"}\nfunction zp(a){var b=Hf(\"H-service\",\"1.34.1\",\"7cc2bbe66\",{region:\"row\"});a.a.xnlp=\"CL_JSMv3.\"+b.version;return a}function wp(a){var b,c=0;for(b in a.a)if(a.a.hasOwnProperty(b)&&\"function\"!==typeof a.a[b]&&(c++,0<c))break;return!c}function yp(a){var b;if(!zc(a))throw new D(yp,0,a);for(b=0;b<a.length;b++){var c=a[b];if(!Ac(c)&&!Dc(c))throw new D(yp,0,\"The array can only contain strings and numbers\");}this.a=a}U.MultiValueQueryParameter=yp;yp.prototype.Sm=function(){return this.a};\nyp.prototype.getValues=yp.prototype.Sm;function V(a){a=qp({},this.c,a);var b=a.apikey||a.apiKey,c=a.baseUrl;if(c=b?c?0:\"baseUrl\":\"apikey\")throw new D(V,0,'\"'+c+'\" must be specified');this.Jk(a.baseUrl);this.b=b;this.a.G({apikey:b});this.f=a.headers||{};this.g=Va(a.servicesConfig||{})}t(\"H.service.Platform\",V);V.prototype.c={apikey:null,baseUrl:new U(\"https\",\"hereapi\"+(lo?\".cn\":\".com\"))};V.prototype.Jk=function(a){this.a=zp(a.clone());this.b=a=this.b;this.a.G({apikey:a})};V.prototype.setBaseUrl=V.prototype.Jk;V.prototype.Ab=function(){return this.a};\nV.prototype.getBaseUrl=V.prototype.Ab;V.prototype.Qa=function(a,b){try{return a.Mj=!0,new a(qp({platformBaseUrl:this.Ab(),headers:this.f},this.g[a.CONFIG_KEY]||{},b||{}))}finally{a.Mj=!1}};V.prototype.createService=V.prototype.Qa;V.prototype.lf=function(a,b,c,d,e,f){function g(r,v,w,z,J){return r.hc(v,w,m,z,n,1,J,k)}var h=hk,k={crossOrigin:\"anonymous\"};if(Ea(a)){var l=a;\"crossOrigin\"in l&&(k.crossOrigin=l.crossOrigin);a=l.tileSize;b=l.ppi;c=l.lg;d=l.lg2;e=l.style;f=l.pois;l.engineType&&(h=l.engineType,k.engineType=h)}var m=a||512,n={};if(0>[72,250,320,500].indexOf(+b)){if(b!==B)throw new D(this.lf,1,b);}else n.ppi=+b;c&&(n.lg=c);d&&(n.lg2=d);e&&(n.style=e);f&&(n.pois=!!f);if(h===ik.HARP&&!H.map.render.harp)throw new D(this.lf,\n0,\"HARP engine is not supported, module not found\");a=this.sj();e=h===ik.WEBGL?new qi(to()+\"/omv/miami/normal.day.yaml\"):new H.map.render.harp.Style(to()+\"/harp/oslo/normal.day.json\");b={engineType:h};l&&l.politicalView&&(b.politicalView=l.politicalView);c&&(b.lg=c);d&&(b.lg2=d);f&&(b.pois=f);c=a.bd(e,b);d={};if(lo)qp(d,{vector:{normal:{map:c}}});else{f=this.Ug();l=this.Ug({type:\"aerial\"});e=this.yj();var q=h===ik.WEBGL?new qi(to()+\"/omv/miami/truck.day.yaml\"):new H.map.render.harp.Style(to()+\"/harp/oslo/normal.day.json\");\na=a.bd(q,b);b=e.Qi(n.lg?{lg:n.lg,i18n:!0,engineType:h}:{engineType:h});qp(d,{vector:{normal:{map:c,truck:a,traffic:e.Pi(void 0,h),trafficincidents:b}},raster:{normal:{xbase:g(f,\"xbasetile\",\"normal.day\",\"png8\",!1),xbasenight:g(f,\"xbasetile\",\"normal.night\",\"png8\",!0),base:g(f,\"basetile\",\"normal.day\",\"png8\",!1),basenight:g(f,\"basetile\",\"normal.night\",\"png8\",!0),map:g(f,\"maptile\",\"normal.day\",\"png8\",!1),mapnight:g(f,\"maptile\",\"normal.night\",\"png8\",!0),trafficincidents:b,transit:g(f,\"maptile\",\"normal.day.transit\",\n\"png8\",!1),labels:g(f,\"labeltile\",\"normal.day\",\"png\",!1)},satellite:{xbase:g(l,\"xbasetile\",\"hybrid.day\",\"jpg\",!0),base:g(l,\"basetile\",\"hybrid.day\",\"jpg\",!0),map:g(l,\"maptile\",\"hybrid.day\",\"jpg\",!0),labels:g(l,\"labeltile\",\"hybrid.day\",\"png\",!0)},terrain:{xbase:g(l,\"xbasetile\",\"terrain.day\",\"jpg\",!1),base:g(l,\"basetile\",\"terrain.day\",\"jpg\",!1),map:g(l,\"maptile\",\"terrain.day\",\"jpg\",!1),labels:g(l,\"labeltile\",\"terrain.day\",\"png\",!1)}}})}return d};V.prototype.createDefaultLayers=V.prototype.lf;function Ap(a){if(!a||!Da(a.requestData))throw new D(Ap,0,\"options.requestData\");Ap.l.constructor.call(this,a);this.R=a.requestData;this.B=!!a.providesDomMarkers}u(Ap,R);t(\"H.map.provider.MarkerTileProvider\",Ap);Ap.prototype.Ed=function(a){return a?a.length+1:1};Ap.prototype.getEntryWeight=Ap.prototype.Ed;\nAp.prototype.I=function(a,b,c,d,e){var f=this;return this.R(a,b,c,function(g){for(var h=[],k,l,m=g.length;m--;)l=g[m],l.ho=f.getTileKey(a,b,c),l.ga(f),k=l.pb(),(C(l,$i)||1===k.getState())&&h.push(g[m]);d(h)},e)};Ap.prototype.requestInternal=Ap.prototype.I;Ap.prototype.Pd=function(a,b){b===kh.VISUAL&&(a=this.Cb().get(a.ho))&&(a.valid=!1,this.Ra(a))};Ap.prototype.invalidateObject=Ap.prototype.Pd;Ap.prototype.Ib=function(){return this.B};Ap.prototype.providesDomMarkers=Ap.prototype.Ib;\nAp.prototype.Jb=ff;Ap.prototype.providesMarkers=Ap.prototype.Jb;function Bp(){this.a={}}Bp.prototype.pb=function(a,b){var c=a+b,d;if(d=this.a[c])return d;a=Cp.MARKER.replace(\"{{icon}}\",Dp[a]||Dp.OTHER);a=a.replace(\"{{color}}\",Ep[b]||Ep.BLOCKING);b={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new Vi(Wi.POLYGON,Fp.MARKER)};return this.a[c]=d=new Uj(a,b)};\nvar Cp={MARKER:'<svg width=\"26\" height=\"33\" enable-background=\"new 0 0 26 33\" viewBox=\"0 0 26 33\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m26 33h-26v-33h26z\" fill=\"#8c8c8c\" opacity=\"0\"/><path d=\"m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026\" fill=\"#878787\" opacity=\".6\"/><path d=\"m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z\" fill=\"{{color}}\"/>{{icon}}</svg>'},Dp=\n{CONGESTION:'<path style=\"fill:#FFFFFF;\" d=\"M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z\"/>',\nROADWORKS:'<path d=\"m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z\" fill=\"#fff\"/>',\nACCIDENT:'<path style=\"fill:#FFFFFF;\" d=\"M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z\"/>',\nOTHER:'<path style=\"fill:#FFFFFF;\" d=\"M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z\"/>'},\nEp={BLOCKING:\"#323232\",VERYHIGH:\"#d5232f\",HIGH:\"#ffa100\"},Fp={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function Gp(a,b,c){c=c?c:{};c.criticality||(c.criticality=\"major,critical\");C(a,Hp,Gp,0);Ap.call(this,{max:20,min:8,requestData:A(this.N,this),engineType:c.engineType});this.b=new Bp;this.v=a;this.i=c;this.reload=A(this.reload,this);this.u=setInterval(this.reload,b||18E4)}u(Gp,Ap);t(\"H.service.traffic.incidents.Provider\",Gp);var Ip={minor:\"HIGH\",\"low impact\":\"HIGH\",major:\"VERYHIGH\",critical:\"BLOCKING\"};\nGp.prototype.N=function(a,b,c,d,e){var f=this,g=this.b;return this.v.requestIncidentsByTile(a,b,c,function(h){var k=[];h=h.TRAFFIC_ITEMS;var l;if(h)for(h=h.TRAFFIC_ITEM,l=h.length;l--;){var m=h[l];var n=m.TRAFFIC_ITEM_TYPE_DESC;switch(n){case \"ACCIDENT\":case \"CONGESTION\":var q=n;break;case \"CONSTRUCTION\":q=\"ROADWORKS\";break;default:q=\"OTHER\"}q=g.pb(q,Ip[m.CRITICALITY.DESCRIPTION]);n=m.LOCATION.GEOLOC.ORIGIN;n=new Jn({lat:n.LATITUDE,lng:n.LONGITUDE},{provider:f,icon:q});n.setData(m);k.push(n)}d(k)},\ne,this.i)};Gp.prototype.C=function(){Ap.prototype.C.call(this);clearInterval(this.u)};Gp.prototype.dispose=Gp.prototype.C;var Jp=\"A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A\".split(\" \");function Kp(a,b,c,d){Kp.l.constructor.call(this,{min:10,max:21,engineType:d});C(a,Hp,Kp,0);this.u=a;this.b=c||Lp;this.b.responseattributes=\"sh,fc\";this.i=setInterval(A(this.reload,this),b||18E4);this.c===ik.WEBGL?this.Ob(new qi(to()+\"/traffic/flow.yaml\"),!0):this.Ob(new H.map.render.harp.Style({styles:[{when:[\"==\",[\"geometry-type\"],\"LineString\"],technique:\"solid-line\",renderOrder:10002,attr:{color:[\"case\",[\">=\",[\"get\",\"JF\"],10],\"black\",[\">=\",[\"get\",\"JF\"],8],\"red\",[\">=\",[\"get\",\"JF\"],4],\"yellow\",\"green\"],\nlineWidth:3,metricUnit:\"Pixel\"}}]}))}u(Kp,R);t(\"H.service.traffic.flow.Provider\",Kp);Kp.prototype.Qh=ff;Kp.prototype.providesGeoJSON=Kp.prototype.Qh;Kp.prototype.oa=function(){return this.fb()};Kp.prototype.getStyle=Kp.prototype.oa;Kp.prototype.bc=function(a){a.b&&a.b(\"GeoJSONTileSource\");this.Ob(a)};Kp.prototype.setStyle=Kp.prototype.bc;var Lp={locationreferences:\"tmc,shp\"};Kp.prototype.o=function(){Kp.l.o.call(this);clearInterval(this.i)};\nKp.prototype.I=function(a,b,c,d,e){return this.u.requestFlowByTile(a,b,c,function(f){f.type&&-1!==f.type.indexOf(\"Error\")?e(f.Details):d(f)},e,this.b)};Kp.prototype.requestInternal=Kp.prototype.I;\nKp.prototype.Sb=function(a,b,c,d,e){var f,g,h,k,l={type:\"FeatureCollection\",features:[]},m;var n=d.RWS.length;for(f=0;f<n;f++){var q=d.RWS[f];var r=q.RW;var v=r.length;var w=-1!==Jp.indexOf(q.EXTENDED_COUNTRY_CODE+q.EBU_COUNTRY_CODE);for(q=0;q<v;q++){var z=r[q].FIS;var J=z.length;for(z=0;z<J;z++){var I=r[q].FIS[z].FI;var Z=I.length;for(g=0;g<Z;g++){var X=I[g];var xa=[];var ka=X.CF[0];var kc=!!ka.SSS;var yb={type:\"Feature\",properties:ka,geometry:{type:\"MultiLineString\",coordinates:xa}};yb.properties.LHT=\nw;X.SHP.length&&(yb.properties.FC=X.SHP[0].FC);kc&&(m=[]);for(ka=0;ka<X.SHP.length;ka++){var od=X.SHP[ka].value;var Ki=od.length;for(h=0;h<Ki;h++){var Ue=kc?m:void 0,Xb=new io(od[h].trim()),eg=[],fd={};for(Xb.be();-1!==(k=Xb.Hb());)k===Mp?(fd.lat=+String.fromCharCode.apply(Kp,Xb.Bd()),Xb.next(),Xb.be()):k===Np?(fd.lng=+String.fromCharCode.apply(Kp,Xb.Bd()),eg.push([fd.lng,fd.lat]),Ue&&Ue.push(ng(fd)),fd=[],Xb.next(),Xb.be()):Xb.next();fd.lng=+String.fromCharCode.apply(Kp,Xb.Bd());eg.push([fd.lng,\nfd.lat]);Ue&&Ue.push(ng(fd));k=eg;xa.push(k)}}l.features.push(yb)}}}}return Kp.l.Sb.call(this,a,b,c,l,e)};Kp.prototype.createTileInternal=Kp.prototype.Sb;var Np=32,Mp=44;function Op(a,b){b=void 0===b?{}:b;if(!a.Mj)throw new Yc(a);Op.l.constructor.call(this);var c=Pp(this,b);if(!c.baseUrl&&!c.platformBaseUrl)throw new D(a,0,'either \"baseUrl\" or \"platformBaseUrl\" must be specified');this.j=(c.baseUrl?c.baseUrl:c.platformBaseUrl).clone();a=c.baseUrl?b:c;a.host&&this.j.Te(a.host);a.subDomain&&this.j.za(a.subDomain);a.path&&this.j.sd(a.path);zp(this.j);this.i=c.headers||{}}u(Op,F);t(\"H.service.Service\",Op);function Pp(a,b){a=a.a();return b?qp({},a,b):a}\nOp.prototype.a=function(){return{}};Op.prototype.D=function(){return this.j};Op.prototype.getUrl=Op.prototype.D;Op.prototype.I=function(a,b,c,d){d=new tf(void 0===d?\"application/json\":d,a.toString(),he,{headers:this.i});d.then(b,Qp(this,a,c));return d};function Qp(a,b,c){return function(d){return\"function\"!==typeof d.json?Promise.reject(c(Rp(b,d))):d.json().then(function(e){return c(a.b(e))},function(){return c(Rp(b,d))})}}Op.prototype.b=function(a){return Error(a.message)};\nfunction Rp(a,b){return Error((b.statusText?\"[\"+b.statusText+\"] \":\"\")+a+\" request failed\")};function Sp(a){function b(m){d.contains(e)&&d.removeChild(e);l&&clearTimeout(l);delete Sp.a[f];m&&a.aj&&a.aj.call(k,m)}if(!a.url||!a.Ag)throw Error('Parameter \"options\" must specify at least a URL and a callback.');if(\"function\"!==typeof a.Ag)throw Error(\"Parameters options.callback must be a function\");var c=a.Do||document;var d=c.getElementsByTagName(\"head\")[0];var e=c.createElement(\"script\");c=a.url instanceof U?a.url:vp(a.url,a.Co);var f=Sp.b++;var g=a.pl||\"callback\";var h=a.Ag;var k={};var l=\nnull;k.id=f;k.cancel=function(){b(\"cancelled\")};0!==a.timeout&&(l=x.setTimeout(function(){b(\"timeout\")},a.timeout||3E4));Sp.a[f]=function(m){b();h.call(k,m)};e.type=\"text/javascript\";e.src=c.toString()+(c.Fj()?\"&\":\"?\")+g+\"=\"+(a.Eo?\"H.service.jsonp.handleResponse(\"+f+\")\":encodeURI(\"H.service.jsonp.handleResponse(\"+f+\")\"));d.appendChild(e);return k}t(\"H.service.jsonp\",Sp);Sp.Xm=function(a){return(a=Sp.a[a])?a:function(){}};Sp.handleResponse=Sp.Xm;Sp.b=0;Sp.a={};function Hp(a){Hp.l.constructor.call(this,Hp,a);this.c=Pp(this,a).callbackKey}u(Hp,Op);t(\"H.service.traffic.Service\",Hp);Hp.prototype.a=function(){return{subDomain:\"traffic.ls\",path:\"traffic/6.1\",callbackKey:\"jsoncallback\"}};Hp.CONFIG_KEY=\"traffic\";Hp.prototype.Pi=function(a,b){return new ql(new Kp(this,void 0,a,b),{max:22})};Hp.prototype.createFlowLayer=Hp.prototype.Pi;Hp.prototype.Qi=function(a){return new Kn(new Gp(this,void 0,a))};Hp.prototype.createIncidentsLayer=Hp.prototype.Qi;\nfunction Tp(a,b,c,d){return Sp({url:b,Ag:c,aj:function(e){d(Error(\"[\"+e+\"] \"+b+\" request failed\"))},pl:a.c})}Hp.prototype.Un=function(a,b,c){a=this.D().clone().J(\"incidents.json\").G(a);return Tp(this,a,b,c)};Hp.prototype.requestIncidents=Hp.prototype.Un;Hp.prototype.Tn=function(a,b,c,d,e,f){a=this.D().clone().J([\"flow/json\",c,a,b].join(\"/\")).G(f||{});return Tp(this,a,d,e)};Hp.prototype.requestFlowByTile=Hp.prototype.Tn;\nHp.prototype.Vn=function(a,b,c,d,e,f){a=this.D().clone().J([\"incidents/json\",c,a,b].join(\"/\")).G(f||{});return Tp(this,a,d,e)};Hp.prototype.requestIncidentsByTile=Hp.prototype.Vn;V.prototype.yj=function(a){return this.Qa(Hp,a)};V.prototype.getTrafficService=V.prototype.yj;function Up(a){Up.l.constructor.call(this,Up,a);this.c=Pp(this,a).reverseSubDomain}u(Up,Op);t(\"H.service.GeocodingService\",Up);Up.prototype.a=function(){return{subDomain:\"geocoder.ls\",reverseSubDomain:\"reverse\",path:\"6.2\"}};Up.CONFIG_KEY=\"geocoding\";Up.prototype.b=function(a){return Error(a.Details||a.message||a.error)};Up.prototype.Lg=function(a,b,c){a=this.D().clone().J(\"geocode.json\").G(a);return this.I(a,b,c)};Up.prototype.geocode=Up.prototype.Lg;\nUp.prototype.Uh=function(a,b,c){a=this.D().clone().J(\"reversegeocode.json\").G(a);this.c&&a.za(this.c);return this.I(a,b,c)};Up.prototype.reverseGeocode=Up.prototype.Uh;Up.prototype.search=function(a,b,c){a=this.D().clone().J(\"search.json\").G(a);return this.I(a,b,c)};Up.prototype.search=Up.prototype.search;V.prototype.lj=function(a){rp(V.prototype.lj,\"Use H.service.Platform#getSearchService instead\");return this.Qa(Up,a)};V.prototype.getGeocodingService=V.prototype.lj;function Vp(a){Vp.l.constructor.call(this,Vp,a)}u(Vp,Op);t(\"H.service.PlacesService\",Vp);Vp.prototype.a=function(){return{subDomain:\"places.ls\",path:\"places/v1\"}};Vp.CONFIG_KEY=\"places\";Vp.EntryPoint={SEARCH:\"discover/search\",SUGGEST:\"suggest\",EXPLORE:\"discover/explore\",AROUND:\"discover/around\",HERE:\"discover/here\",CATEGORIES:\"categories/places\"};Vp.prototype.request=function(a,b,c,d){return Wp(this,a,b,c,d)};Vp.prototype.request=Vp.prototype.request;\nfunction Wp(a,b,c,d,e){b=a.D().clone().J(b).G(c||{});return a.I(b,d,e)}Vp.prototype.search=function(a,b,c){return Wp(this,\"discover/search\",a,b,c)};Vp.prototype.search=Vp.prototype.search;Vp.prototype.fo=function(a,b,c){return Wp(this,\"suggest\",a,b,c)};Vp.prototype.suggest=Vp.prototype.fo;Vp.prototype.zl=function(a,b,c){return Wp(this,\"discover/explore\",a,b,c)};Vp.prototype.explore=Vp.prototype.zl;Vp.prototype.ll=function(a,b,c){return Wp(this,\"discover/around\",a,b,c)};Vp.prototype.around=Vp.prototype.ll;\nVp.prototype.Zm=function(a,b,c){return Wp(this,\"discover/here\",a,b,c)};Vp.prototype.here=Vp.prototype.Zm;Vp.prototype.ql=function(a,b,c){return Wp(this,\"categories/places\",a,b,c)};Vp.prototype.categories=Vp.prototype.ql;Vp.prototype.Al=function(a,b,c,d){a=vp(a).G(this.D().getQuery()).G(d||{});return this.I(a,b,c)};Vp.prototype.follow=Vp.prototype.Al;V.prototype.uj=function(a){rp(V.prototype.uj,\"Use H.service.Platform#getSearchService instead\");return this.Qa(Vp,a)};\nV.prototype.getPlacesService=V.prototype.uj;function Xp(){this.a={}}function Yp(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d,e=b[c],f=a.a[c]||(a.a[c]=[]),g=e.length;for(d=0;d<g;d++)f.push(new Zp(e[d]))}}function $p(a,b,c,d){var e=(a=a.a[b])?a.length:0,f=[];for(b=0;b<e;b++)a[b].hd(c,d)&&f.push(a[b]);return f}\nfunction Zp(a){var b,c=a.boxes;this.label=a.label;this.min=a.minLevel;this.max=a.maxLevel;this.b=[];if(c&&(b=c.length)){var d=c[0];var e=new K(d[0],d[1],d[2],d[3]);this.b.push(e);this.a=new K(d[0],d[1],d[2],d[3]);for(a=1;a<b;a++)d=c[a],e=new K(d[0],d[1],d[2],d[3]),this.b.push(e),this.a.Xb(e,!1,this.a)}}Zp.prototype.hd=function(a,b){if(a>=this.min&&a<=this.max)if((a=this.b.length)&&this.a){if(this.a.hd(b))for(;a--;)if(this.b[a].hd(b))return!0}else return!0;return!1};function aq(a,b,c){var d=this,e=c||{},f=+e.min,g=+e.max;e.tileSize=e.tileSize||512;e.min=f?Zd(f,1,17):1;e.min+=Nk(e.tileSize,1);e.max=g?Zd(g,1,17):17;aq.l.constructor.call(this,e);C(a,bq,aq,0);C(b,Th,aq,1);this.j=a;b.b&&b.b(\"OMV\");this.Ob(b,!0);this.b=!1;c&&(c.politicalView&&(this.ua=c.politicalView),cq(this,c.lg,c.lg2),this.b=!!c.pois);this.R=function(){dq(d);d.reload(!1)};a.addEventListener(\"versionupdate\",this.R);dq(this);aq.prototype.Y=function(){var h=/^v2\\/vectortiles\\/(.+)\\/mc$/.exec(a.D().b);\nreturn h?h[1]:B+\"\"}()}u(aq,R);t(\"H.service.omv.Provider\",aq);aq.prototype.ld=ff;aq.prototype.providesOMV=aq.prototype.ld;function dq(a){var b=a.gd(\"_#-;,:\",\"_#-;,:\",\"_#-;,:\");a.N=new RegExp(\"^\"+b.replace(/[.*+?^${}()|[\\]\\\\\\/]/g,\"\\\\$&\").replace(/_#-;,:/g,\"\\\\d+\")+\"$\")}aq.prototype.Rb=function(a){return this.N.test(a)};aq.prototype.cacheFilter=aq.prototype.Rb;aq.prototype.gd=function(a,b,c){return eq(this.j,a,b,c).toString()};aq.prototype.getTileKey=aq.prototype.gd;aq.prototype.Cb=function(){return this.$};\naq.prototype.getCache=aq.prototype.Cb;aq.prototype.xm=function(){return this.ua};aq.prototype.getPoliticalView=aq.prototype.xm;aq.prototype.MAX_STORE_TIME=2592E6;aq.prototype.s=function(){return md()};aq.prototype.g=function(){return md()?ld():aq.l.g.call(this)};aq.prototype.I=function(a,b,c,d,e){return this.j.Oa(a,b,c,d,e)};aq.prototype.requestInternal=aq.prototype.I;aq.prototype.bc=function(a){a.b&&a.b(\"OMV\");this.Ob(a)};aq.prototype.setStyle=aq.prototype.bc;aq.prototype.oa=function(){return aq.l.fb.apply(this)};\naq.prototype.getStyle=aq.prototype.oa;aq.prototype.fb=function(){var a=aq.l.fb.apply(this),b=a.getState()===Uh.READY,c=a.Kc();b?c&&c.global&&(this.i&&(this.B&&(c.global.ux_language=this.B),this.v&&(c.global.ux_language_fallback=this.v)),this.b&&c.global.poi&&c.global.poi[\"default\"]&&(c.global.poi[\"default\"].visible=this.b),this.i||this.b)&&(a=new qi(c,a.Ab())):a.load();return a};aq.prototype.getStyleInternal=aq.prototype.fb;\nfunction cq(a,b,c){var d=Ac(b),e=Ac(c);d&&(a.B=b);e&&(a.v=c);if(d||e)a.u=[],d=/^([a-zA-Z]{2})(-|$)/,(b=d.exec(b))&&a.u.push(b[1]),(b=d.exec(c))&&a.u.push(b[1]),a.i=!0}aq.prototype.i=!1;var fq=[\"en\"];aq.prototype.hm=function(){return this.u||fq};aq.prototype.getLanguages=aq.prototype.hm;aq.prototype.o=function(){aq.l.o.call(this);this.j.removeEventListener(\"versionupdate\",this.R)};aq.prototype.$=new Pk(256);aq.prototype.la=function(a,b){return $p(this.j.la(),this.Y,b,a)};\naq.prototype.getCopyrights=aq.prototype.la;function bq(a){bq.l.constructor.call(this,bq,a);a=Pp(this,a).mapVersion;this.c=uc(a)?a:gq[this.D().toString()];uc(this.c)||hq(this)}u(bq,Op);t(\"H.service.omv.Service\",bq);bq.prototype.a=function(){return{subDomain:\"vector\",path:\"v2/vectortiles/base/mc\"}};bq.CONFIG_KEY=\"omv\";var gq={};Gc(gq);bq.prototype.om=function(){return this.c};bq.prototype.getMapVersion=bq.prototype.om;\nfunction hq(a){a.I(a.D().clone().J(\"../../info\"),function(b){b=b.mapVersion;var c=a.D().toString();a.c=b;b!==gq[c]&&(gq[c]=b,a.dispatchEvent(\"versionupdate\"))},function(){})}bq.prototype.bd=function(a,b){b=b||{};var c={min:0,max:22};lo&&(b.min=c.min=4);return new ql(new aq(this,a,b),c)};bq.prototype.createLayer=bq.prototype.bd;bq.prototype.Oa=function(a,b,c,d,e){return this.I(eq(this,a,b,c),function(f){return f.arrayBuffer().then(d,e)},e,\"arraybuffer\")};\nfunction eq(a,b,c,d){b=a.D().clone().J(d+\"/\"+b+\"/\"+c+\"/omv\");uc(a.c)&&b.G({mv:a.c});return b}bq.prototype.Wg=function(a,b){if(!Da(a))throw new D(this.Wg,0,'\"onResult\" must be a function');if(!Da(b))throw new D(this.Wg,1,'\"onError\" must be a function');return this.I(this.D().clone().sd(\"v2/vectortiles/pviews\"),a,b)};bq.prototype.getPoliticalViews=bq.prototype.Wg;V.prototype.sj=function(a){return this.Qa(bq,a)};V.prototype.getOMVService=V.prototype.sj;bq.prototype.g=function(a){Yp(this.f,a);this.dispatchEvent(\"copyrightupdate\")};\nbq.prototype.la=function(){this.f||(this.f=new Xp,this.I(this.D().clone().J(\"../../copyrights\"),A(this.g,this),jd));return this.f};bq.prototype.getCopyrights=bq.prototype.la;function iq(a){iq.l.constructor.call(this,iq,a);this.c=a.getToken}u(iq,Op);t(\"H.service.iml.Service\",iq);iq.prototype.a=function(){return{host:\"interactive.data.api.platform.here.com\",path:\"interactive/v1/catalogs\"}};\niq.prototype.b=function(a){function b(){for(var d=ea(c),e=d.next();!e.done;e=d.next()){e=e.value;var f=e.format;if(e.keys.every(function(g){return a[g]}))return f()}return JSON.stringify(a)}var c=[{keys:[\"code\",\"title\",\"cause\",\"action\"],format:function(){return a.code+\": \"+a.title+\"; cause: \"+a.cause+\"; action: \"+a.action}},{keys:[\"error\",\"error_description\"],format:function(){return a.error+\": \"+a.error_description}},{keys:[\"error\",\"errorMessage\"],format:function(){return a.error+\": \"+a.errorMessage}}];\nreturn Error(Ea(a)?b():a)};iq.prototype.Md=function(a,b,c,d,e){var f=this.Md;jq(f,0,a,b);kq(f,2,c,d);a=this.D().clone().J(a+\"/layers/\"+b+\"/statistics\").G(e||{});return lq(this,a,\"GET\",c,d)};iq.prototype.getStatistics=iq.prototype.Md;iq.prototype.uf=function(a,b,c,d,e,f,g,h,k){var l=k?\"\":\".mvtf\";a=this.D().clone().J(d+\"/layers/\"+e+\"/tile/web/\"+c+\"_\"+a+\"_\"+b+l).G(Object.assign({clip:!0},h));return lq(this,a,\"GET\",k?f:function(m){return m.arrayBuffer().then(f)},g,void 0,k?\"application/json\":\"arraybuffer\")};\niq.prototype.getFeaturesByTile=iq.prototype.uf;iq.prototype.ij=function(a,b,c,d,e,f){var g=this.ij;mq(g,a);jq(g,1,b,c);kq(g,3,d,e);a=oq(this,a,b,c,f);return lq(this,a,\"GET\",d,e)};iq.prototype.getFeatureById=iq.prototype.ij;iq.prototype.Mc=function(a,b,c,d,e,f){var g=this.Mc;pq(g,a);jq(g,1,b,c);kq(g,3,d,e);a=qq(this,a,b,c,f);return lq(this,a,\"GET\",d,e)};iq.prototype.getFeaturesById=iq.prototype.Mc;\niq.prototype.Fd=function(a,b,c,d,e){var f=this.Fd;if(!Ea(a)||!(a.bbox||a.north&&a.east&&a.south&&a.west))throw new D(f,0,'must be an object with either \"bbox\" or a full set of \"north\", \"east\", \"south\" and \"west\"');jq(f,1,b,c);kq(f,3,d,e);a=this.D().clone().J(b+\"/layers/\"+c+\"/bbox\").G(a);return lq(this,a,\"GET\",d,e)};iq.prototype.getFeaturesByBoundingBox=iq.prototype.Fd;\niq.prototype.kj=function(a,b,c,d,e){var f=this.kj;if(!(Ea(a)&&a.radius&&(a.lat&&(a.lng||a.lon)||a.refCatalogHrn&&a.refLayerId&&a.refFeatureId)))throw new D(f,0,'must be an object with \"radius\" and a combination of either \"lat\"+\"lng\" or \"refCatalogHrn\"+\"refLayerId\"+\"refFeatureId\"');jq(f,1,b,c);kq(f,3,d,e);a=this.D().clone().J(b+\"/layers/\"+c+\"/spatial\").G(a);return lq(this,a,\"GET\",d,e)};iq.prototype.getFeaturesByPointAndRadius=iq.prototype.kj;\niq.prototype.jj=function(a,b,c,d,e,f){var g=this.jj;if(!Ea(a)||!a.radius)throw new D(g,0,'must be an object with \"radius\"');rq(g,1,b);jq(g,2,c,d);kq(g,4,e,f);a=this.D().clone().J(c+\"/layers/\"+d+\"/spatial\").G(a);return lq(this,a,\"POST\",e,f,b)};iq.prototype.getFeaturesByGeometryAndRadius=iq.prototype.jj;iq.prototype.Fk=function(a,b,c,d,e){var f=this.Fk;jq(f,0,a,b);kq(f,2,c,d);a=this.D().clone().J(a+\"/layers/\"+b+\"/search\").G(e||{});return lq(this,a,\"GET\",c,d)};iq.prototype.searchFeatures=iq.prototype.Fk;\niq.prototype.Qj=function(a,b,c,d,e){var f=this.Qj;jq(f,0,a,b);kq(f,2,c,d);a=this.D().clone().J(a+\"/layers/\"+b+\"/iterate\").G(e||{});return lq(this,a,\"GET\",c,d)};iq.prototype.iterateFeatures=iq.prototype.Qj;iq.prototype.Uc=function(a,b,c,d,e,f){var g=this.Uc;rq(g,0,a);jq(g,1,b,c);kq(g,3,d,e);b=sq(this,b,c,f);return lq(this,b,\"PUT\",d,e,a)};iq.prototype.putFeatures=iq.prototype.Uc;\niq.prototype.Sc=function(a,b,c,d,e,f){var g=this.Sc;rq(g,0,a);jq(g,1,b,c);kq(g,3,d,e);b=sq(this,b,c,f);return lq(this,b,\"POST\",d,e,a)};iq.prototype.postFeatures=iq.prototype.Sc;iq.prototype.cd=function(a,b,c,d,e){var f=this.cd;pq(f,a);jq(f,1,b,c);kq(f,3,d,e);a=qq(this,a,b,c);return lq(this,a,\"DELETE\",d,e)};iq.prototype.deleteFeatures=iq.prototype.cd;iq.prototype.yk=function(a,b,c,d,e,f,g){var h=this.yk;mq(h,a);rq(h,1,b);jq(h,2,c,d);kq(h,4,e,f);a=oq(this,a,c,d,g);return lq(this,a,\"PUT\",e,f,b)};\niq.prototype.putFeature=iq.prototype.yk;iq.prototype.rk=function(a,b,c,d,e,f,g){var h=this.rk;mq(h,a);rq(h,1,b);jq(h,2,c,d);kq(h,4,e,f);a=oq(this,a,c,d,g);return lq(this,a,\"PATCH\",e,f,b)};iq.prototype.patchFeature=iq.prototype.rk;iq.prototype.Ui=function(a,b,c,d,e){var f=this.Ui;mq(f,a);jq(f,1,b,c);kq(f,3,d,e);a=oq(this,a,b,c);return lq(this,a,\"DELETE\",d,e,void 0,\"text/plain\")};iq.prototype.deleteFeature=iq.prototype.Ui;\nfunction sq(a,b,c,d){return a.D().clone().J(b+\"/layers/\"+c+\"/features\").G(d||{})}function qq(a,b,c,d,e){b=Object.assign({},e,{id:new yp(b)});return sq(a,c,d,b)}function oq(a,b,c,d,e){return a.D().clone().J(c+\"/layers/\"+d+\"/features/\"+b).G(e||{})}\nfunction lq(a,b,c,d,e,f,g){g=void 0===g?\"application/json\":g;c={method:c,headers:Object.assign({},f?{\"Content-Type\":\"application/geo+json\"}:void 0,\"function\"===typeof a.c?{Authorization:\"Bearer \"+a.c()}:void 0,a.i)};f&&(c.data=JSON.stringify(f));f=new tf(g,b.toString(),he,c);f.then(d,Qp(a,b,e));return f}iq.CONFIG_KEY=\"iml\";function jq(a,b,c,d){xc(c,\"String\",a,b,\"must be a string\");xc(d,\"String\",a,b+1,\"must be a string\")}function mq(a,b){xc(b,\"String\",a,0,\"must be a string\")}\nfunction pq(a,b){if(!Array.isArray(b)||0===b.length||b.some(function(c){return\"string\"!==typeof c}))throw new D(a,0,\"must be a non-empty array of strings\");}function rq(a,b,c){if(!Ea(c))throw new D(a,b,\"must be a GeoJSON object\");}function kq(a,b,c,d){if(!Da(c))throw new D(a,b,\"must be a function\");if(!Da(d))throw new D(a,b+1,\"must be a function\");}V.prototype.dm=function(a){return this.Qa(iq,a)};V.prototype.getIMLService=V.prototype.dm;function tq(a,b,c,d){tq.l.constructor.call(this,d?{min:d.min,max:d.max,engineType:d.engineType}:void 0);C(a,iq,tq,0);if(!Ac(b))throw new D(tq,1,'\"catalogHrn\" must be a string');if(!Ac(c))throw new D(tq,2,'\"layerId\" must be a string');this.v=a;this.b=b;this.i=c;this.u=Ea(d)&&Ea(d.parameters)?d.parameters:{};this.Ob(this.c===ik.WEBGL?new qi({sources:{iml:{type:\"MVT\"}},layers:{iml:{data:{source:\"iml\",layer:this.b+\":\"+this.i},points:{filter:{$geometry:\"point\"},draw:{points:{collide:!1,order:200,color:\"#92CF48\",\nsize:[[10,\"8px\"],[14,\"12px\"],[18,\"16px\"]]}}},polygons:{filter:{$geometry:\"polygon\"},draw:{polygons:{order:201,color:\"#E39E3C\"},lines:{order:202,color:\"#755DA5\",width:\"1px\"}}},lines:{filter:{$geometry:\"line\"},draw:{lines:{order:203,color:\"#0258AE\",width:\"2px\",join:\"round\",cap:\"round\"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.b+\":\"+this.i,when:[\"==\",[\"geometry-type\"],\"Point\"],technique:\"circles\",renderOrder:200,color:\"#92CF48\",size:[\"interpolate\",[\"linear\"],[\"zoom\"],10,8,14,12,18,16]},\n{layer:this.b+\":\"+this.i,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"fill\",color:\"#E39E3C\",renderOrder:201},{layer:this.b+\":\"+this.i,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"solid-line\",color:\"#755DA5\",lineWidth:\"1px\",renderOrder:202},{layer:this.b+\":\"+this.i,when:[\"==\",[\"geometry-type\"],\"LineString\"],technique:\"solid-line\",color:\"#0258AE\",lineWidth:\"2px\",renderOrder:203}]}))}u(tq,R);t(\"H.service.iml.Provider\",tq);\ntq.prototype.I=function(a,b,c,d,e){return this.v.uf(a,b,c,this.b,this.i,d,e,this.u)};tq.prototype.requestInternal=tq.prototype.I;tq.prototype.ld=ff;tq.prototype.providesOMV=tq.prototype.ld;tq.prototype.oa=function(){return this.fb()};tq.prototype.getStyle=tq.prototype.oa;tq.prototype.bc=function(a){C(a,qi)&&a.b(\"MVT\");this.Ob(a)};tq.prototype.setStyle=tq.prototype.bc;function uq(a,b,c,d,e,f,g){var h=this;g=g||{};f=f?f:{};var k=a.D().clone().J(b+\"/\"+a.nc()+\"/\"+c).G(f),l=a.f;this.B=a;this.N=k;Ck.call(this,{tileSize:d,max:512===d?19:20,min:512===d?2:0,getURL:function(m,n,q){var r=h.N.clone();l&&r.za(l[(q+n+m)%l.length]);r.J(q+\"/\"+m+\"/\"+n+\"/\"+d+\"/\"+e);return r.toString()},crossOrigin:g.crossOrigin,headers:g.headers,uri:k.toString().replace(/_/g,\"\")+d,engineType:g.engineType});this.Xa=b;this.ya=c;this.ua=f;this.$=c.split(\".\")[0];this.i=A(this.i,this);this.getCopyrights=\nthis.la;a.addEventListener(\"versionupdate\",this.i)}u(uq,Ck);uq.prototype.MAX_STORE_TIME=2592E6;uq.prototype.o=function(){Ck.prototype.o.call(this);this.B.removeEventListener(\"versionupdate\",this.i)};uq.prototype.la=function(a,b){return $p(this.B.la(),this.$,b,a)};uq.prototype.getCopyrights=uq.prototype.la;uq.prototype.i=function(){var a=this.B;this.N=a.D().clone().J(this.Xa+\"/\"+a.nc()+\"/\"+this.ya).G(this.ua);this.reload(!1)};uq.prototype.s=function(){return md()};\nuq.prototype.g=function(){return md()?ld():uq.l.g.call(this)};function vq(a){vq.l.constructor.call(this,vq,a);a=Pp(this,a);this.f=a.shards;(this.g=a.ignoreTypes?null:a.type)&&this.D().za(this.g);this.c=a.version;this.s=new Xp;this.u={};this.m=0;\"newest\"===this.c&&wq(this)}u(vq,Op);t(\"H.service.MapTileService\",vq);vq.prototype.a=function(){return{subDomain:\"maps.ls\",path:\"maptile/2.1\",type:\"base\",version:\"newest\",shards:[\"1\",\"2\",\"3\",\"4\"]}};vq.CONFIG_KEY=\"maptile\";function xq(a,b){for(var c={},d=a[b+\"s\"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+\"s\"]=c}\nvq.prototype.zj=function(){return this.g};vq.prototype.getType=vq.prototype.zj;vq.prototype.nc=function(){return this.c};vq.prototype.getVersion=vq.prototype.nc;vq.prototype.la=function(){this.m||(this.c&&\"newest\"!==this.c||\"traffic\"===this.g)&&yq(this);return this.s};vq.prototype.getCopyrights=vq.prototype.la;\nfunction wq(a){var b=a.D().clone().J(\"info\").G({output:\"json\"});a.f&&b.za(a.f[0]);a.I(b,function(c){c=c.response;var d;xq(c,\"map\");xq(c,\"scheme\");xq(c,\"tiletype\");xq(c,\"format\");xq(c,\"resolution\");xq(c,\"language\");if(\"newest\"===a.c&&\"traffic\"!==a.g)for(d in c.maps)c.maps[d].hash&&c.maps[d].newest&&(a.c=c.maps[d].hash,a.dispatchEvent(\"versionupdate\"));a.v=c;a.dispatchEvent(\"infoupdate\")},function(c){throw c;})}\nfunction yq(a){var b=a.D().clone().J(\"copyright\").J(a.nc()).G({output:\"json\"});a.f&&b.za(a.f[0]);a.m=1;a.I(b,function(c){a.m=2;Yp(a.s,c);a.dispatchEvent(\"copyrightupdate\")},function(c){a.m=-1;throw c;})}vq.prototype.Rg=function(){return this.v};vq.prototype.getInfo=vq.prototype.Rg;\nvq.prototype.oe=function(a,b,c,d,e,f){var g=this.D().clone().J(a+\"/\"+this.nc()+\"/\"+b+\"/\"+c+\"/\"+d).G(e?e:{}).toString();var h=0,k,l=g.length;if(0!==l)for(k=0;k<l;k++){var m=g.charCodeAt(k);h=(h<<5)-h+m;h|=0}g=h;h=this.u[g];h||(h=new uq(this,a,b,c,d,e,qp({headers:this.i},f||{})),this.u[g]=h);return h};vq.prototype.createTileProvider=vq.prototype.oe;vq.prototype.hc=function(a,b,c,d,e,f,g,h){a=this.oe(a,b,c,d,e,h);return new ql(a,{opacity:f,dark:!!g})};vq.prototype.createTileLayer=vq.prototype.hc;\nV.prototype.Ug=function(a){return this.Qa(vq,a)};V.prototype.getMapTileService=V.prototype.Ug;function zq(a){zq.l.constructor.call(this,zq,a)}u(zq,Op);t(\"H.service.publicTransit.Service\",zq);zq.prototype.a=function(){return{subDomain:\"transit.router\",path:\"v8\"}};zq.CONFIG_KEY=\"publicTransit\";zq.prototype.Fm=function(a,b,c){a=this.D().clone().J(\"routes\").G(a);return this.I(a,b,c)};zq.prototype.getRoutes=zq.prototype.Fm;zq.prototype.Sl=function(a,b,c){a=this.D().clone().J(\"departures\").G(a);return this.I(a,b,c)};zq.prototype.getDepartures=zq.prototype.Sl;\nzq.prototype.Jm=function(a,b,c){a=this.D().clone().J(\"stations\").G(a);return this.I(a,b,c)};zq.prototype.getStations=zq.prototype.Jm;zq.prototype.b=function(a){return Error(JSON.stringify(a))};V.prototype.Bm=function(a){return this.Qa(zq,a)};V.prototype.getPublicTransitService=V.prototype.Bm;function Aq(a){Aq.l.constructor.call(this,Aq,a);rp(Aq,\"Use HERE Routing API v8 instead.\")}u(Aq,Op);t(\"H.service.RoutingService\",Aq);Aq.prototype.a=function(){return{subDomain:\"route.ls\",path:\"routing/7.2\"}};Aq.prototype.b=function(a){return Error(a.details)};Aq.CONFIG_KEY=\"routing\";Aq.prototype.xd=function(a,b,c){a=this.D().clone().J(\"calculateroute.json\").G(a);return this.I(a,b,c)};Aq.prototype.calculateRoute=Aq.prototype.xd;\nAq.prototype.zg=function(a,b,c){a=this.D().clone().za(\"isoline\").J(\"calculateisoline.json\").G(a);return this.I(a,b,c)};Aq.prototype.calculateIsoline=Aq.prototype.zg;function Bq(a){Bq.l.constructor.call(this,Bq,a)}u(Bq,Op);t(\"H.service.RoutingService8\",Bq);Bq.CONFIG_KEY=\"routing_v8\";Bq.prototype.a=function(){return{subDomain:\"router\",path:\"v8/routes\"}};Bq.prototype.b=function(a){return Error(a.error)};Bq.prototype.xd=function(a,b,c){a=this.D().clone().G(a);return this.I(a,b,c)};Bq.prototype.calculateRoute=Bq.prototype.xd;Bq.prototype.zg=function(a,b,c){a=this.D().clone().za(\"isoline\").sd(\"v8/isolines\").G(a);return this.I(a,b,c)};\nBq.prototype.calculateIsoline=Bq.prototype.zg;V.prototype.wj=function(a,b){b=lo?8:+b||7;if(7===b)b=Aq;else if(8===b)b=Bq;else throw new D(this.wj,1,\"allowed values are 7 and 8\");return this.Qa(b,a)};V.prototype.getRoutingService=V.prototype.wj;function Cq(){}t(\"H.service.extension.dataView.ITable\",Cq);Cq.prototype.Id=function(){};Cq.prototype.getMeta=Cq.prototype.Id;Cq.prototype.Ld=function(){};Cq.prototype.getRowCount=Cq.prototype.Ld;Cq.prototype.mc=function(){};Cq.prototype.getRow=Cq.prototype.mc;Cq.prototype.Ma=function(){};Cq.prototype.getColumnNames=Cq.prototype.Ma;Cq.prototype.ve=function(){};Cq.prototype.getColumn=Cq.prototype.ve;Cq.prototype.sa=function(){};Cq.prototype.getCell=Cq.prototype.sa;Cq.prototype.concat=function(){};\nCq.prototype.concat=Cq.prototype.concat;function Dq(){}t(\"H.service.extension.dataView.IRow\",Dq);Dq.prototype.Ma=function(){};Dq.prototype.getColumnNames=Dq.prototype.Ma;Dq.prototype.sa=function(){};Dq.prototype.getCell=Dq.prototype.sa;Dq.prototype.fd=function(){};Dq.prototype.getTable=Dq.prototype.fd;function Eq(a,b){this.a=a;this.b=b}t(\"H.service.extension.dataView.ObjRow\",Eq);Eq.prototype.Ma=function(){return this.a.Ma()};Eq.prototype.getColumnNames=Eq.prototype.Ma;Eq.prototype.sa=function(a){return this.a.sa(this.b,a)};Eq.prototype.getCell=Eq.prototype.sa;Eq.prototype.fd=function(){return this.a};Eq.prototype.getTable=Eq.prototype.fd;function Fq(){}t(\"H.service.extension.dataView.IColumn\",Fq);Fq.prototype.sa=function(){};Fq.prototype.getCell=Fq.prototype.sa;function Gq(a,b){this.b=a;this.a=b}t(\"H.service.extension.dataView.ObjColumn\",Gq);Gq.prototype.sa=function(a){return this.b.sa(a,this.a)};Gq.prototype.getCell=Gq.prototype.sa;function Hq(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):B);this.ub=a;if(b)for(this.yd=b,this.Bg=a=nc(),d=b.length;d--;)a[b[d]]=!0;c!==B&&(this.Dh=c)}t(\"H.service.extension.dataView.ObjTable\",Hq);p=Hq.prototype;p.Dh=B;p.ub=B;p.yd=B;p.Bg=B;p.Id=function(){return this.Dh};Hq.prototype.getMeta=Hq.prototype.Id;Hq.prototype.Ld=function(){return this.ub?this.ub.length:0};Hq.prototype.getRowCount=Hq.prototype.Ld;Hq.prototype.mc=function(a){var b=this.ub;return b&&b[a]?new Eq(this,a):B};\nHq.prototype.getRow=Hq.prototype.mc;Hq.prototype.Ma=function(){return this.yd||hf};Hq.prototype.getColumnNames=Hq.prototype.Ma;Hq.prototype.ve=function(a){return this.Bg[a]?new Gq(this,a):B};Hq.prototype.getColumn=Hq.prototype.ve;Hq.prototype.sa=function(a,b){var c=this.ub;return(a=c&&this.Bg[b]&&c[a])&&a[b]};Hq.prototype.getCell=Hq.prototype.sa;\nHq.prototype.concat=function(){var a=arguments.length,b,c=this.yd,d=\"\"+this.yd,e=(this.ub||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof Hq))throw new D(this.concat,b);if(f.ub){if(c&&\"\"+f.yd!==d)throw new D(this.concat,b,\"Incompatible columns!\");e=e.concat(f.ub)}}return new Hq(e,this.yd,this.Dh)};Hq.prototype.concat=Hq.prototype.concat;function Iq(a,b){a.ub?a.ub.push(b):a.ub=[b];return a.ub.length-1};function Jq(a){var b=Kq;if(!a||!Ac(af(a.layerId,a.layer))||!Dc(a.level)||uc(a.rowFilter)&&!Da(a.rowFilter)||uc(a.rowFilterContext)&&!Ea(a.rowFilterContext))throw new D(b,1,uc(\"invalid layer config\")?\"invalid layer config\":a);};function Lq(a,b,c,d){d=d||Mq;this.a={};d.provider=a;this.invalidate=gf;Lq.l.constructor.call(this,b,d);delete this.invalidate;c&&(this.b=c);this.pa(kh.ADD)}u(Lq,Eh);t(\"H.service.remote.Spatial\",Lq);var Mq={};Lq.prototype.Za=function(){return this.b||Eh.prototype.Za.call(this)};Lq.prototype.getId=Lq.prototype.Za;Lq.prototype.Zf=jd;Lq.prototype.retain=Lq.prototype.Zf;Lq.prototype.release=ff;Lq.prototype.release=Lq.prototype.release;function Nq(a,b){this.a=a;b&&(this.b=b)}var Oq=new Nq(hf);\nLq.prototype.Gd=function(a){return(this.a[a.key]||Oq).a};Lq.prototype.getGeometriesForTile=Lq.prototype.Gd;Lq.prototype.Tg=function(a){return(this.a[a.key]||Oq).b};Lq.prototype.getLabels=Lq.prototype.Tg;function Pq(a,b,c){a.a[b.key]=new Nq(c,void 0)};function Qq(a,b,c,d){if(!Da(c))throw new D(a,b,\"has invalid type\");if(!Da(d))throw new D(a,b+1,\"has invalid type\");};function Rq(a,b,c){var d=8===a;this.b=b;this.c=c||jd;(this.a=4===a||d)?this.j=d:this.g=1===a;this.f=this.a?\"$HProjGeometry\":\"geometry\"}\nRq.prototype.parse=function(a,b,c){var d,e,f={},g=[],h,k;var l=0;for(h=c.length;l<h;l++){var m=c[l];var n=m.Rows;if(m=n.length){var q=Object.keys(n[0]).filter(function(v){return\"geometry\"!==v&&\"$HProjGeometry\"!==v});q=new Hq(n,q);for(k=0;k<m;k++){var r=n[k];if(e=r[this.f]){if(delete r[this.f],r=q.mc(k))try{this.a?d=Sq(this,a,b,r,e):d=Tq(this,a,r,e.path),d.ga(a),g.push(d)}catch(v){this.c(v.message)}}else this.c(\"Layer must contain geometries\")}}}f[this.a?\"spatials\":this.g?\"markers\":\"domMarkers\"]=\ng;return f};function Sq(a,b,c,d,e){var f=[],g=e.paths,h=g.length,k=0,l=a.b&&a.b(d);for(a=new Lq(b,a.j,B,{style:l||a.i,data:d});k!==h;)f.push(Uq(g[k++]));Pq(a,c,[new Mh(f,e.interiorsIndex,e.outlinesIndex)]);return a}function Tq(a,b,c,d){d=new lg(d[0],d[1]);var e=a.b&&a.b(c);a.g?(a={icon:e,data:c,provider:b},a=new Jn(d,a)):(a={icon:e,data:c,provider:b},a=new $i(d,a));return a}function Uq(a){for(var b=0,c=a.length,d=[];b<c;)d.push(new G(a[b++],a[b++]));return d};function Vq(a,b){var c={};this.b=a;Xa(c,b||c);mk.call(this,c);this.Uf={};a=this.Db(nh.SPATIAL);a.update(a.a+1,kh.ADD)}u(Vq,mk);t(\"H.service.remote.ObjectProvider\",Vq);Vq.prototype.C=function(){mk.prototype.C.call(this)};Vq.prototype.dispose=Vq.prototype.C;Vq.prototype.wc=function(){return hf};Vq.prototype.requestMarkers=Vq.prototype.wc;Vq.prototype.vc=function(){return hf};Vq.prototype.requestDomMarkers=Vq.prototype.vc;Vq.prototype.od=function(){return hf};Vq.prototype.requestOverlays=Vq.prototype.od;\nVq.prototype.Jb=ff;Vq.prototype.providesMarkers=Vq.prototype.Jb;Vq.prototype.Ib=ff;Vq.prototype.providesDomMarkers=Vq.prototype.Ib;Vq.prototype.uc=ff;Vq.prototype.providesSpatials=Vq.prototype.uc;Vq.prototype.Wf=function(){return hf};Vq.prototype.requestSpatials=Vq.prototype.Wf;function Wq(a){return a.oc(!0)}Vq.prototype.Xf=function(a,b){a=Xq(this,a,Yq);b&&(a=a.filter(Wq));return a};Vq.prototype.requestSpatialsByTile=Vq.prototype.Xf;\nfunction Xq(a,b,c){var d=b.j&&b.j[c],e;!d&&(e=b.m)&&(delete b.m,(b.j=a=a.b.parse(a,b,e))&&(d=a[c]));return d||hf}Vq.prototype.ba=function(a){var b=a.Za();if(this.Uf[b])throw new Yc(this.ba,\"Remote object \"+b+\" already added\");return this.Uf[b]=a};Vq.prototype.Da=function(a){delete this.Uf[a.Za()]};var Yq=\"spatials\";function Zq(a){a=a||{};var b=a.tileCacheSize||1024,c=a.resultType,d=a.styleCallback;uc(a.min)||(a.min=12);Zq.l.constructor.call(this,a);if(-1===$q.indexOf(c))throw new D(Zq,2,\"invalid resultType\");this.b=c;if(d&&!Da(d))throw new D(Zq,2,\"invalid style callback\");this.$=d;this.Y=a.pixelRatio||Te();this.yb=A(this.yb,this);this.m(new Pk(b,A(this.Xa,this)));this.createTileInternal=4===c||8===c?A(this.N,this):A(this.R,this)}u(Zq,R);t(\"H.service.extension.TileProvider\",Zq);Zq.prototype.i=!1;\nZq.prototype.getCapabilities=function(){return Zq.l.getCapabilities.call(this)|Oj.CROP_LINES_BY_TILE|Oj.CROP_POLYGONS_BY_TILE};Zq.prototype.Oa=function(a,b,c,d){return this.i?Zq.l.Oa.call(this,a,b,c,d):B};Zq.prototype.requestTile=Zq.prototype.Oa;Zq.prototype.yb=function(a){this.dispatchEvent(new ud(\"error\",Ac(a)?a:a+\"\",this))};Zq.prototype.Jb=function(){return 1===this.b};Zq.prototype.providesMarkers=Zq.prototype.Jb;Zq.prototype.Ib=function(){return 2===this.b};Zq.prototype.providesDomMarkers=Zq.prototype.Ib;\nZq.prototype.uc=function(){return 4===this.b||8===this.b};Zq.prototype.providesSpatials=Zq.prototype.uc;function ar(a){var b=a.ua;b||(a.v||(a.v=a.u(a.b,a.$,a.yb)),b=a.ua=new Vq(a.v),b.ga(a),b.addEventListener(a.A.xa,A(a.ya,a)),b.ua=!0);return b}\nZq.prototype.R=function(a,b,c,d){var e=this.getTileKey(a,b,c);e=this.Cb().get(e);var f=2==this.b,g=[],h=ar(this);e?e.valid=!0:(a=e=new Vk(a,b,c,y),delete a.j,a.m=d);d=f?Xq(h,e,\"domMarkers\"):Xq(h,e,\"markers\");for(b=d.length;b--;)a=d[b],a.ti=e,(f||1===a.pb().getState())&&g.push(a);e.data=g;return e};Zq.prototype.ya=function(a){if(a=a.target.ti)a.valid=!1};Zq.prototype.$n=function(a){this.B=!!a};Zq.prototype.setTileCanvasRendering=Zq.prototype.$n;Zq.prototype.B=!0;\nZq.prototype.N=function(a,b,c,d){var e=ar(this),f=this.getTileKey(a,b,c),g=this.tileSize,h=this.Cb().get(f);h||(a=h=new Zk(f,a,b,c,g,this.Y,c,e),delete a.j,a.m=d);this.B?(d=up.pop(g),h.U(d)||up.push(d,g)):el(h);return h};Zq.prototype.Xa=function(a,b){var c;if(4===this.b||8===this.b){a=b.Na();for(c=a.length;c--;)delete a[c].a[b.key];if(a=b.Sf())up.push(a,this.tileSize),b.Tf()}else for(a=b.data,c=a.length;c--;)delete a[c].ti};Zq.prototype.o=function(){Zq.l.o.call(this);ar(this).C()};\nvar br={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};Zq.ResultType=br;var $q=[1,2,4,8];function Kq(a,b,c){var d=this,e=b&&b.rowFilter,f=c.resultType;Kq.l.constructor.call(this,c);C(a,cr,Kq,0);Jq(b);e?(c=Va(b),c.rowFilter=e.toString()):c=Va(b);delete c.layer;c.layerId=af(b.layerId,b.layer);(new Pf).a(\"pde\",\"H.service.extension.worker.processor\");a=a.D().clone().J(dr+\".\"+er).G({meta:1});(new Sf(\"pde\",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:4===f,serverUrl:a.toString(),layerConfigs:[c],horizontalMargin:1}]})).then(function(){d.i=!0;d.Ra()},this.yb)}\nu(Kq,Zq);t(\"H.service.extension.platformData.TileProvider\",Kq);Kq.prototype.u=function(a,b,c){a=new Rq(a,b,c);a.i=fr;return a};var fr=new wh({strokeColor:\"transparent\",fillColor:\"transparent\",lineWidth:0,lineJoin:\"round\",lineCap:\"round\"});\nKq.prototype.I=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Cb().get(g);var k={cancel:jd},l=!0,m=this.b;g&&(4===m||8===m?g.Qd()||(d(up.pop(this.tileSize),null),l=!1):(d(y),l=!1));if(l){var n=sp.setTimeout(function(){h=new Sf(\"pde\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():sp.clearTimeout(n)}}return k};Kq.prototype.requestInternal=Kq.prototype.I;Kq.prototype.o=function(){Kq.l.o.call(this);new Sf(\"pde\",{message:[this.uid,3]})};\nKq.ResultType=br;function gr(a,b,c,d,e,f){Qq(gr,1,b,c);Qq(gr,2,d,e);(this.f=a.length)?(this.S=a,this.s=b,this.i=c,this.b=0,this.c=A(this.c,this),this.m=d,this.j=e,this.a=nc(),Xa(this.a,hr,f||{}),this.g={},x.setTimeout(this.c,0)):b(hf,!0)}var hr={duration:100,El:\"geometry\",Dl:\"WKT\",Wn:\"searchAttributes\",Ti:B};\ngr.prototype.c=function(){var a=[];var b=!1;for(var c=Jk(),d;this.b<this.f;){var e=this.S[this.b];b=e.attributes;d=e.layerId||this.a.Ti;e.distance&&(b[this.a.Wn]={nearest:new lg(e.nearestLat,e.nearestLon),distance:e.distance});if(e=e[this.a.El]){try{var f=On(new io(e))}catch(g){this.i(new x.Error(g.message));b=!0;break}b[this.a.Dl]=f}(e=this.g[d])||(e=this.g[d]=this.m({layerId:d,columnNames:Object.keys(b)}));b=this.j(e,b);a.push(b);this.b++;if((b=this.b===this.f)||Jk()-c>=this.a.duration){this.s(a,\nb);break}}b?this.g={}:this.u=x.setTimeout(this.c,0)};gr.prototype.cancel=function(){x.clearTimeout(this.u);this.b<this.f&&this.i(new x.Error(\"parsing canceled\"))};gr.prototype.cancel=gr.prototype.cancel;function ir(a){this.a=a}ir.prototype.cancel=function(){for(var a=this.a,b=a.length;b--;)a[b].cancel();a.length=0};ir.prototype.cancel=ir.prototype.cancel;function cr(a){cr.l.constructor.call(this,cr,a)}u(cr,Op);t(\"H.service.extension.platformData.Service\",cr);cr.prototype.a=function(){return{subDomain:\"s.fleet.ls\",path:\"1\"}};cr.CONFIG_KEY=\"platformData\";\ncr.prototype.request=function(a,b,c,d,e){var f=\"text/plain\";if(!a)throw new D(this.request,0,a);if(!b)throw new D(this.request,1,b);if(!d)throw new D(this.request,3,d);if(!e)throw new D(this.request,4,e);a=this.D().clone().J(a+\".\"+b).G(c);b===jr.JSON&&(f=\"application/json\");return this.I(a,d,e,f)};cr.prototype.request=cr.prototype.request;var dr=\"tiles\";\ncr.EntryPoint={DOC_ATTRIBUTES:\"doc/attributes\",DOC_LAYER:\"doc/layer\",DOC_LAYERS:\"doc/layers\",DOC_MAPS:\"doc/maps\",DOC_INDEXES:\"doc/indexes\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SERVICE_CONFIGURATION:\"serviceconfiguration\",STATIC:\"static\",TILE:\"tile\",TILES:dr,FILE:\"file\",INDEX:\"index\"};var er=\"json\",jr={TXT:\"txt\",JSON:er,HTML:\"html\",BIN:\"bin\"};cr.EntryPointType=jr;\ncr.prototype.hc=function(a,b){var c=b&&b.resultType;a=new Kq(this,a,b);var d;1==c||2===c?d=new Kn(a):d=new ql(a);return d};cr.prototype.createTileLayer=cr.prototype.hc;function kr(a,b,c,d,e){var f=[],g,h=c.layer_id||c.layer_ids;a=a.request(b,er,c,function(k){g=new gr(k.geometries,d,e,function(l){return new Hq([],l.columnNames,l)},function(l,m){return l.mc(Iq(l,m))},{Ti:h});f.push(g)},function(k){e(new x.Error(k))});f.push(a);return new ir(f)}\nfunction lr(a,b,c){if(!zc(a))throw new D(c,0,\"has invalid type\");if(!zc(b))throw new D(c,1,\"has invalid type\");if(a.length!==b.length||!a.length)throw new D(c,1,\"specify one key attribute for each given layer id in the same order\");}\ncr.prototype.xc=function(a,b,c,d,e,f){function g(l,m){m&&h--;d(l,!h)}var h,k=[];lr(a,b,this.xc);Qq(this.xc,3,d,e);C(c,K,this.xc,2);c={bbox:c.c+\",\"+c.a+\";\"+c.f+\",\"+c.b};f&&Xa(c,f);a=c.layer_id?[c.layer_id]:a;f=0;for(h=a.length;f<h;f++)c.layer_id=a[f],c.key_attribute=b[f],k.push(kr(this,\"search/bbox\",c,g,e));return new ir(k)};cr.prototype.searchByBoundingBox=cr.prototype.xc;\ncr.prototype.Lb=function(a,b,c,d,e,f,g){lr(a,b,this.Lb);C(c,lg,this.Lb,2,\"has invalid type\");if(!Dc(d))throw new D(this.Lb,3,\"has invalid type\");Qq(this.Lb,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),proximity:c.lat+\",\"+c.lng+\",\"+d};g&&Xa(a,g);return kr(this,\"search/proximity\",a,e,f)};cr.prototype.searchByProximity=cr.prototype.Lb;\ncr.prototype.Kb=function(a,b,c,d,e,f,g){var h=\"\";lr(a,b,this.Kb);if(!Ac(c)&&!C(c,L))throw new D(this.Kb,1,\"has invalid type\");if(!Dc(d))throw new D(this.Kb,2,\"has invalid type\");Qq(this.Kb,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),radius:d};if(Ac(c))a.route_id=c;else{d=c.X;c=0;for(b=d.length;c<b;c+=3)h+=d[c]+\",\"+d[c+1],c<b-3&&(h+=\";\");a.corridor=h}g&&Xa(a,g);return kr(this,\"search/corridor\",a,e,f)};cr.prototype.searchByCorridor=cr.prototype.Kb;\nV.prototype.vj=function(a){rp(V.prototype.vj);return this.Qa(cr,a)};V.prototype.getPlatformDataService=V.prototype.vj;function mr(a){mr.l.constructor.call(this,mr,a)}u(mr,Op);t(\"H.service.extension.geofencing.Service\",mr);mr.prototype.a=function(){return{subDomain:\"fleet.ls\",path:\"2\"}};mr.CONFIG_KEY=\"geofencing\";mr.prototype.request=function(a,b,c,d){if(!a)throw new D(this.request,0,a);if(!Da(c))throw new TypeError(\"onResult must be a function\");if(!Da(d))throw new TypeError(\"onError must be a function\");a=this.D().clone().J(a+\".json\").G(b);return this.I(a,c,d)};mr.prototype.request=mr.prototype.request;\nmr.prototype.b=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(\". \"):a.message||a.response_code)};mr.EntryPoint={SEARCH_PROXIMITY:\"search/proximity\"};V.prototype.mj=function(a){rp(V.prototype.mj);return this.Qa(mr,a)};V.prototype.getGeofencingService=V.prototype.mj;t(\"H.service.extension.customLocation.Permission\",{READ:\"read\",WRITE:\"write\",EXPORT:\"export\"});t(\"H.service.extension.customLocation.Storage\",{READONLY:\"readonly\",UPDATABLE:\"updatable\"});function nr(a){var b=or;if(!a||!Ac(a.layerId)||uc(a.rowFilter)&&!Da(a.rowFilter)||uc(a.rowFilterContext)&&!Ea(a.rowFilterContext))throw new D(b,1,uc(\"invalid layer config\")?\"invalid layer config\":a);}function pr(a){return Ac(a)&&/^[A-Z][A-Z0-9_]*$/.test(a)}function qr(a){for(var b=a&&a.length,c=2<=b&&\"WKT\"===a[--b]&&\"GEOMETRY_ID\"===a[--b];c&&b--;)c=pr(a[b]);return c}\nfunction rr(a,b){var c=\"\",d=[];if(b){var e=a.geometries;if(e&&e.length){var f=Object.keys(e[0].attributes);c=c+(\"Meta:\\t\"+b+\"\\n\")+f.join(\"\\t\");c+=\"\\tWKT\\n\";for(a=0;a<e.length;a++){var g=e[a].attributes;var h=e[a].geometry;for(b=0;b<f.length;b++)d.push(g[f[b]]);c+=d.join(\"\\t\");c+=\"\\t\"+h+\"\\n\";d=[]}}}else{h={};d=[];if(a.geometries)for(e=0;e<a.geometries.length;e++)b=a.geometries[e],h[b.layerId]||(h[b.layerId]=[]),h[b.layerId].push(b);for(f in h)d.push({layerId:f,geometries:h[f]});for(a=0;a<d.length;a++)c+=\nrr(d[a],d[a].layerId)}return c};function or(a,b,c){var d=this,e=b&&b.rowFilter,f;or.l.constructor.call(this,c);C(a,sr,or,0);var g=c.resultType;nr(b);if(e){var h=Va(b);h.rowFilter=e.toString()}else h=b;(new Pf).a(\"cle\",\"H.service.extension.worker.processor\");var k=b.layerId;a.request(tr,ur,{detail_level:\"all\",layer_id:k},function(l){l=l.layers;var m;for(m=0;m<l.length;m++)if(l[m].layerId===k){h.level=l[m].level;break}f=a.D().clone().J(vr+\".\"+ur).G({meta:1});(new Sf(\"cle\",{message:[d.uid,0,{tileSize:d.tileSize,projected:!0,onlyOutline:4===\ng,serverUrl:f.toString(),layerConfigs:[h],batchTiles:!1,horizontalMargin:1}]})).then(function(){d.i=!0;d.Ra()},d.yb)},function(l){d.yb(l.message)})}u(or,Zq);t(\"H.service.extension.customLocation.TileProvider\",or);or.prototype.u=function(a,b,c){return new Rq(a,b,c)};\nor.prototype.I=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Cb().get(g);var k={cancel:jd},l=!0,m=this.b;g&&(4===m||8===m?g.Qd()||(d(up.pop(this.tileSize),null),l=!1):(d(y),l=!1));if(l){var n=sp.setTimeout(function(){h=new Sf(\"cle\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():sp.clearTimeout(n)}}return k};or.prototype.requestInternal=or.prototype.I;or.prototype.o=function(){or.l.o.call(this);new Sf(\"cle\",{message:[this.uid,3]})};function wr(){if(xr)throw new Yc(wr);}t(\"H.service.extension.customLocation.Table\",wr);var xr=!0;function yr(a,b){var c;xr=!1;var d=new wr;xr=!0;d.c=qc(x.JSON.parse(x.JSON.stringify(a)));a=a.columnNames;var e=nc();for(c=a.length;c--;)e[a[c]]=c;d.f=e;d.b=a.length;if(b){if(b.length%a.length)throw new D(yr,1,\"Invalid number of cells\");}else b=[];d.a=b;return d}wr.prototype.Id=function(){return this.c};wr.prototype.getMeta=wr.prototype.Id;wr.prototype.Ld=function(){return this.a.length/this.b};\nwr.prototype.getRowCount=wr.prototype.Ld;wr.prototype.mc=function(a){return a<this.a.length/this.b?new zr(this,a):B};wr.prototype.getRow=wr.prototype.mc;wr.prototype.Gm=function(){var a=this.a.length/this.b,b,c=new x.Array(a);for(b=0;b<a;b++)c[b]=new zr(this,b);return c};wr.prototype.getRows=wr.prototype.Gm;wr.prototype.tg=function(a){var b=this.b,c=this.a,d=c.length/this.b;if(!a||a.length%b)throw new D(this.tg,0,\"Invalid number of cells\");this.a=c.concat(a);return d};wr.prototype.addCells=wr.prototype.tg;\nwr.prototype.il=function(){for(var a=this.b,b=this.a,c=this.a.length/this.b;a--;)b.push(y);return this.mc(c)};wr.prototype.addRow=wr.prototype.il;wr.prototype.Ma=function(){return this.c.columnNames};wr.prototype.getColumnNames=wr.prototype.Ma;wr.prototype.ve=function(a){return this.f[a]===B?B:new Ar(this,a)};wr.prototype.getColumn=wr.prototype.ve;wr.prototype.sa=function(a,b){return this.a[a*this.b+this.f[b]]};wr.prototype.getCell=wr.prototype.sa;\nwr.prototype.yc=function(a,b,c){b=this.f[b];if(a>=this.a.length/this.b)throw new D(this.yc,0,\"Row index out of bounds\");if(b===B)throw new D(this.yc,0,\"Column unknown\");this.a[a*this.b+b]=c};wr.prototype.setCell=wr.prototype.yc;\nwr.prototype.concat=function(a){var b=arguments.length,c,d=\"\"+this.Ma(),e=this.a?this.a.slice():[];for(c=0;c<b;c++){var f=arguments[c];if(!(f instanceof wr))throw new D(this.concat,c);if(\"\"+f.Ma()!==d)throw new D(this.concat,c,\"Incompatible columns!\");f.a&&(e=e.concat(f.a))}return yr(this.c,e)};wr.prototype.concat=wr.prototype.concat;var Br=/(\\n|\\t|\\r|\")/;\nwr.prototype.ri=function(a,b){var c,d=this.b,e=this.Ma(),f=[],g=[],h=this.a,k=-1;for(c=0;c<d;c++)if(!a||a.test(e[c]))\"WKT\"===e[c]&&(k=f.length),f.push(c);if(!(a=f.length))throw new D(this.ri,1,\"No columns filtered\");Cr(this,g,e,0,d,f,a,k);if(b){var l=b.length;for(c=0;c<l;c++)g.push(\"\\n\"),e=b[c],Cr(this,g,h,e,d,f,a,k)}else for(l=this.Ld(),e=0;e<l;e++)g.push(\"\\n\"),Cr(this,g,h,e,d,f,a,k);return g.join(\"\")};\nfunction Cr(a,b,c,d,e,f,g,h){var k;for(k=0;k<g;k++){k&&b.push(\"\\t\");var l=c[d*e+f[k]];if(k!==h){if(l!==y){l=String(l);if(Br.test(l))throw new D(a.ri,0,'Invalid character (\\\\n, \\\\r, \\\\t, or \") in row '+d+\" column \"+a.c.columnNames[f[k]]);b.push(l)}}else b.push(l)}}function Ar(a,b){this.b=a;this.a=b}wr.Column=Ar;Ar.prototype.sa=function(a){return this.b.sa(a,this.a)};Ar.prototype.getCell=Ar.prototype.sa;Ar.prototype.yc=function(a,b){this.b.yc(a,this.a,b)};Ar.prototype.setCell=Ar.prototype.yc;\nfunction zr(a,b){this.a=a;this.yh=b}wr.Row=zr;zr.prototype.Ma=function(){return this.a.Ma()};zr.prototype.getColumnNames=zr.prototype.Ma;zr.prototype.sa=function(a){return this.a.sa(this.yh,a)};zr.prototype.getCell=zr.prototype.sa;zr.prototype.yc=function(a,b){this.a.yc(this.yh,a,b)};zr.prototype.setCell=zr.prototype.yc;zr.prototype.fd=function(){return this.a};zr.prototype.getTable=zr.prototype.fd;function Dr(a){if(a===B)a=\"\\t\";else if(!/^[^\"\\r\\n]$/.test(a))throw new D(Dr,0);this.c=String(a).charCodeAt(0);this.zh=A(this.zh,this);this.a=Er}var Er=0;p=Dr.prototype;p.getState=function(){return this.a};function Fr(a,b,c){var d=a.a;if(d!==b)throw 1===d&&(a.a=Er),new Yc(c,\"Requires state: \"+[\"READY\",\"PARSE\",\"PAUSE\"][b]+\" but found \"+[\"READY\",\"PARSE\",\"PAUSE\"][d]);}p.abort=function(){Fr(this,2,Dr.prototype.abort);this.a=Er};\np.zh=function(a){this.a=Er;throw new D(Dr.prototype.parse,0,\"Malformed DSV at row \"+this.b.j+\" column \"+this.b.b+\": \"+a);};function Gr(a,b){var c=[];a.parse(b,function(d,e,f){1>d&&(c[e]=f);return 0<d});a.a=Er;return c}p.parse=function(a,b,c){Fr(this,Er,Dr.prototype.parse);a=a.trim();this.b=new Hr(a,this.c,this.zh);this.f=b;this.fk=c||gf;this.a=2;this.Ah()};p.fk=gf;\np.Ah=function(){var a=this.b,b=[];Fr(this,2,Dr.prototype.Ah);this.a=1;do{if(!a.g){this.a=Er;break}if(e>a.b){if(void 0!==c&&c!==e){this.b.a(\"The number of columns must be the same for all rows\");return}var c=e}var d=a.j;var e=a.b;var f=a.hf;var g=this.fk(d,e,a);if(a.hf>f)for(;-1!==a.next(););else{for(;-1!==(f=a.next());)b.push(f);g=String.fromCharCode.apply(y,b);b.length=0}Ir(a);this.f(d,e,g)&&(this.a=a.g?2:Er)}while(1===this.a);2!=this.a&&void 0!==c&&0<e&&c!==e&&this.b.a(\"The number of columns must be the same for all rows\")};\nfunction Hr(a,b,c){this.c=new io(a);this.m=b;this.g=!0;this.hf=this.j=this.b=0;Ir(this);this.a=c;this.f=[];this.i=!1}p=Hr.prototype;p.hf=0;function Ir(a){var b=a.c.Hb();a.s=!1;(a.S=34===b)&&a.c.next()}function Jr(a,b){var c=a.c;a.s=!0;switch(b){case a.m:a.b++;break;case 13:c.next(),10!==c.Hb()&&a.a(\"CR without LF\");case 10:a.b=0;a.j++;break;case -1:a.g=!1;break;default:a.a(\"End of field expected\")}c.next();return-1}\np.Hb=function(){if(this.s)var a=-1;else{var b=this.c;a=b.Hb();if(this.S)switch(a){case 34:b.next();a=b.Hb();34!==a&&(a=Jr(this,a));break;case -1:this.a(\"Closing quotation mark expected\")}else switch(a){case 34:this.a(\"Unexpected quotation mark\");case this.m:case 13:case 10:case -1:a=Jr(this,a)}}return a};p.be=function(){this.i=!0;this.f=[]};p.Bd=function(){var a=this.f.slice();this.i=!1;this.f=[];return a};p.next=function(){var a=this.Hb();-1!==a&&this.c.next();this.i&&this.f.push(a);this.hf++;return a};function Kr(a,b,c,d){d=d||{};if(!b)throw new D(Kr,1,\"has to be a function\");if(!c)throw new D(Kr,2,\"has to be a function\");this.m=b;this.u=c;this.a=[];this.g={};this.f=[];this.b={};this.i={};this.j={};this.s={};this.S=d.duration||100;this.c=A(this.c,this);a=a.split(\"Meta:\\t\").slice(1);for(b=0;b<a.length;b++){d=a[b].split(\"\\n\");c=d[0].split(\"\\t\")[0];d=d.slice(1).join(\"\\n\");this.b[c]=new Dr;this.g[c]=Gr(this.b[c],d);var e={layerId:c,columnNames:this.g[c]};this.f.push(c);this.s[c]=yr(e);this.i[c]=Jk();\nLr(this,d,c);this.c(c)}}function Lr(a,b,c){var d=[],e=a.g[c].length-1,f=a.s[c];try{a.b[c].parse(b,function(g,h,k){var l=!1;0<g&&(d[h]=k,h===e&&(a.a.push(f.mc(f.tg(d))),Jk()-a.i[c]>a.S&&(l=!0)));return l},function(g,h,k){if(0<g&&h===e)return On(k)})}catch(g){a.u(g)}}Kr.prototype.cancel=function(){for(var a in this.j)x.clearTimeout(this.j[a])};Kr.prototype.cancel=Kr.prototype.cancel;\nKr.prototype.c=function(a){var b=this,c,d;this.j[a]=x.setTimeout(function(){if(2===b.b[a].getState())b.i[a]=Jk(),b.m(b.a,!1),b.a=[],b.b[a].Ah(),b.c(a);else{c=!0;for(d=0;d<b.f.length;d++)if(b.b[b.f[d]].getState()!==Er){c=!1;break}c&&(0<b.a.length&&b.m(b.a,!0),b.a=[])}},0)};function sr(a){sr.l.constructor.call(this,sr,a)}u(sr,Op);t(\"H.service.extension.customLocation.Service\",sr);sr.prototype.a=function(){return{subDomain:\"fleet.ls\",path:\"2\"}};sr.CONFIG_KEY=\"customLocation\";sr.prototype.hc=function(a,b){var c=b&&b.resultType;a=new or(this,a,b);var d;1===c||2===c?d=new Kn(a):d=new ql(a);return d};sr.prototype.createTileLayer=sr.prototype.hc;\nfunction Mr(a,b,c,d){var e;a=a===Nr?\"changes\":\"file\";var f=b[a],g=Ac(f),h=!g&&C(f,Blob);if(!g&&!h)throw new D(d,0,\"Invalid \"+a+\" parameter\");if(Or)h?e=f:e=pf(f,\"text/plain\"),d=new x.FormData,d.append(a,e,e.name||a+\".wkt\"),c.method=\"POST\",c.data=d,delete b[a];else if(h)throw new D(d,0,\"Sending Blob data is not supported by the browser\");}var Or=x.FormData&&!!x.FormData.prototype.append;sr.prototype.request=function(a,b,c,d,e){return Pr(this,a,b,c,d,e)};sr.prototype.request=sr.prototype.request;\nfunction Pr(a,b,c,d,e,f){var g=\"text/plain\",h=b===Qr.LAYERS_UPLOAD||b===Qr.LAYERS_MODIFY||b===Qr.LAYERS_IMPORT,k=d,l={data:B,method:\"GET\",headers:a.i};if(!b)throw new D(a.request,0,b);if(!c)throw new D(a.request,1,c);Qq(a.request,3,e,f);h&&(C(d,Object,a.request,2,\"Invalid request parameters\"),k=Va(d),Mr(b,k,l,a.request));var m=a.D().clone().J(b+\".\"+c).G(k);c===Rr.JSON&&(g=\"application/json\");a=new tf(g,m.toString(),he,l);a.then(function(n){var q=n.issues;q&&n.error_id&&n.response_code?f(Error(q[0].message)):\ne(n)},function(n){\"error\"===n.type||404===n.status?f(Error(n.statusText||\"Unable to load data\")):n.json().then(function(q){f(Error(\"[\"+q.issues[0].message+\"] \"+m+\" request failed\"))},function(){f(Error(\"[\"+n.statusText+\"] \"+m+\" request failed\"))})});return a}\nvar tr=\"layers/list\",Nr=\"layers/modify\",vr=\"tiled/tile\",Qr={LAYERS_DELETE:\"layers/delete\",LAYERS_GRANT:\"layers/access/grant\",LAYERS_LIST:tr,LAYERS_MODIFY:Nr,LAYERS_UPLOAD:\"layers/upload\",LAYERS_IMPORT:\"layers/import\",SEARCH_ALL:\"search/all\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SEARCH_TILE:vr};sr.EntryPoint=Qr;var ur=\"json\",Rr={TXT:\"txt\",JSON:ur};sr.EntryPointType=Rr;\nsr.prototype.hb=function(a,b,c){var d=this;return this.request(\"search/all\",\"txt\",{filter:'WKT==\"\"',layer_id:a},function(e){var f=String(e).replace(/[\\r\\n]+$/g,\"\").split(\"\\t\");d.request(tr,ur,{layer_id:a,detail_level:\"all\"},function(g){g=g.layers[0];g.columnNames=f;b(yr(g))},c)},c)};sr.prototype.getLayer=sr.prototype.hb;\nsr.prototype.Dj=function(a,b,c,d){function e(){return++g<f?h.request(\"layers/access/grant\",ur,{layer_id:a,granted_app_id:b[g].grantedAppId,permissions:b[g].permissions.join(\",\")},e,d):h.hb(a,c,d)}var f=b&&b.length,g=-1,h=this;return e()};sr.prototype.grantAccess=sr.prototype.Dj;sr.prototype.Vi=function(a,b,c){return this.request(\"layers/delete\",ur,{layer_ids:a},b,c)};sr.prototype.deleteLayer=sr.prototype.Vi;\nsr.prototype.bd=function(a,b,c){function d(){setTimeout(function(){k.hb(g,function(q){setTimeout(e.bind(null,q),m)},function(){64E3>l?(l+=m,d()):c(x.Error(\"Timeout\"))})},m);m*=2}function e(q){var r=JSON.stringify(q.Ma()),v=a.grants;if(r!==JSON.stringify(h)){var w=\"Results into different column names on the backend: \"+r;setTimeout(function(){k.Vi(g,function(){c(x.Error(w))},function(z){c(x.Error(w+\". \"+z.message))})},m)}else v&&v.length?k.Dj(g,v,b,c):b(q)}var f,g,h,k=this,l=0,m=1E3;var n=!a||!pr(g=\na.layerId)&&(f=\"layerId\")||!qr(h=a.columnNames)&&(f=\"columnNames\")?0:Da(b)?Da(c)?-1:2:1;if(0<=n)throw new D(k.bd,n,f||arguments[n]);return k.hb(g,function(){c(x.Error(\"Layer exists already\"))},function(){var q={layer_id:g,file:h.join(\"\\t\")},r=a.level,v=a.storage;r!==B&&(q.level=r);v!==B&&(q.storage=v);k.request(\"layers/upload\",ur,q,d,c)})};sr.prototype.createLayer=sr.prototype.bd;\nfunction Sr(a,b,c,d,e){var f=[],g;a=a.request(b,ur,c,function(h){h.geometries.length?(h=rr(h,c.layer_id),g=new Kr(h,d,e),f.push(g)):d(hf,!0)},e);f.push(a);return new ir(f)}sr.prototype.Lb=function(a,b,c,d,e,f){if(!zc(a))throw new D(this.Lb,0,\"has invalid type\");C(b,lg,this.Lb,1,\"has invalid type\");if(!Dc(c))throw new D(this.Lb,2,\"has invalid type\");Qq(this.Lb,3,d,e);a={layer_ids:a.join(\",\"),proximity:b.lat+\",\"+b.lng+\",\"+c};f&&Xa(a,f);return Sr(this,\"search/proximity\",a,d,e)};\nsr.prototype.searchByProximity=sr.prototype.Lb;sr.prototype.Kb=function(a,b,c,d,e,f){var g=\"\";if(!zc(a))throw new D(this.Kb,0,\"has invalid type\");if(!Ac(b)&&!C(b,L))throw new D(this.Kb,1,\"has invalid type\");if(!Dc(c))throw new D(this.Kb,2,\"has invalid type\");Qq(this.Kb,3,d,e);a={layer_ids:a.join(\",\"),radius:c};if(Ac(b))a.route_id=b;else{var h=b.X;b=0;for(c=h.length;b<c;b+=3)g+=h[b]+\",\"+h[b+1],b<c-3&&(g+=\",\");a.corridor=g}f&&Xa(a,f);return Sr(this,\"search/corridor\",a,d,e)};\nsr.prototype.searchByCorridor=sr.prototype.Kb;sr.prototype.xc=function(a,b,c,d,e){function f(k,l){l&&h--;c(k,!h)}var g=[],h;if(!zc(a))throw new D(this.xc,0,\"has invalid type\");C(b,K,this.xc,1,\"has invalid type\");Qq(this.xc,2,c,d);b={bbox:b.c+\",\"+b.a+\";\"+b.f+\",\"+b.b};e&&Xa(b,e);a=b.layer_id?[b.layer_id]:a;e=0;for(h=a.length;e<h;e++)b.layer_id=a[e],g.push(Sr(this,\"search/bbox\",b,f,d));return new ir(g)};sr.prototype.searchByBoundingBox=sr.prototype.xc;\nsr.prototype.Xh=function(a,b,c,d){var e,f=[];if(!Ac(a))throw new D(this.Xh,0,\"has invalid type\");Qq(this.Xh,1,b,c);var g={layer_id:a};d&&Xa(g,d);d=this.request(\"search/all\",ur,g,function(h){h.geometries.length?(h=rr(h,a),e=new Kr(h,b,c),f.push(e)):b(hf,!0)},c);f.push(d);return new ir(f)};sr.prototype.searchAll=sr.prototype.Xh;var Tr={\"delete\":/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};\nfunction Ur(a,b,c,d,e,f){function g(){v++;d(this,v===q)}function h(Z){v++;e(Z,this,v===q)}var k=\"append\"!==b,l,m={},n=nc(),q=0,r=[],v=0;if(!zc(c))throw new D(f,0,c);Qq(f,1,d,e);for(l=c.length;l--;){var w=c[l];if(C(w,zr)){var z=w.fd().Id().layerId;var J=w.sa(\"GEOMETRY_ID\");if(k){if(J===y||\"\"===String(J))var I='GEOMETRY_ID must not be null or \"\"';m[J=z+\"_\"+J]&&(I=\"same GEOMETRY_ID for multiple rows\");m[J]=w}else J!==y&&\"\"!==String(J)&&(I='GEOMETRY_ID must be null or \"\"')}else I=\"Invalid type\";if(I)throw new D(f,\n0,\"- Invalid row at index \"+l+\", \"+I);J=n[z];J||(J=n[z]=[],q++);J.push(w)}for(z in n){J=n[z];c=[];for(l=J.length;l--;)c.push(J[l].yh);r.push(a.request(Nr,ur,{layer_id:z,action:b,changes:J[0].fd().ri(Tr[b]||null,c)},A(g,J),A(h,J)))}return new ir(r)}sr.prototype.Li=function(a,b,c){return Ur(this,\"append\",a,b,c,this.Li)};sr.prototype.appendRows=sr.prototype.Li;sr.prototype.bl=function(a,b,c){return Ur(this,\"update\",a,b,c,this.bl)};sr.prototype.updateRows=sr.prototype.bl;\nsr.prototype.Wi=function(a,b,c){return Ur(this,\"delete\",a,b,c,this.Wi)};sr.prototype.deleteRows=sr.prototype.Wi;V.prototype.gj=function(a){rp(V.prototype.gj);return this.Qa(sr,a)};V.prototype.getCustomLocationService=V.prototype.gj;function Vr(a){Vp.l.constructor.call(this,Vr,a)}u(Vr,Op);t(\"H.service.extension.customRoute.Service\",Vr);Vr.prototype.a=function(){return{subDomain:\"s.fleet.ls\",path:\"2\"}};Vr.CONFIG_KEY=\"customRoute\";Vr.prototype.b=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(\". \"):a)};Vr.prototype.xd=function(a,b,c){Qq(this.xd,1,b,c);a=this.D().clone().J(\"calculateroute.json\").G(a);return this.I(a,b,c)};Vr.prototype.calculateRoute=Vr.prototype.xd;\nV.prototype.hj=function(a){rp(V.prototype.hj);return this.Qa(Vr,a)};V.prototype.getCustomRoutingService=V.prototype.hj;function Wr(a){Wr.l.constructor.call(this,Wr,a)}u(Wr,Op);t(\"H.service.SearchService\",Wr);Wr.CONFIG_KEY=\"search\";Wr.prototype.a=function(){return{subDomain:\"search\",path:\"v1\"}};Wr.prototype.b=function(a){a=[a.title,a.action,a.cause].filter(function(b){return b});return Error(a.join(\". \"))};Wr.prototype.Lg=function(a,b,c){a=this.D().clone().za(\"geocode\").J(\"geocode\").G(a);return this.I(a,b,c)};Wr.prototype.geocode=Wr.prototype.Lg;\nWr.prototype.Uh=function(a,b,c){a=this.D().clone().za(\"revgeocode\").J(\"revgeocode\").G(a);return this.I(a,b,c)};Wr.prototype.reverseGeocode=Wr.prototype.Uh;Wr.prototype.ml=function(a,b,c){a=this.D().clone().za(\"autosuggest\").J(\"autosuggest\").G(a);return this.I(a,b,c)};Wr.prototype.autosuggest=Wr.prototype.ml;Wr.prototype.tl=function(a,b,c){a=this.D().clone().za(\"discover\").J(\"discover\").G(a);return this.I(a,b,c)};Wr.prototype.discover=Wr.prototype.tl;\nWr.prototype.pn=function(a,b,c){a=this.D().clone().za(\"lookup\").J(\"lookup\").G(a);return this.I(a,b,c)};Wr.prototype.lookup=Wr.prototype.pn;Wr.prototype.ol=function(a,b,c){a=this.D().clone().za(\"browse\").J(\"browse\").G(a);return this.I(a,b,c)};Wr.prototype.browse=Wr.prototype.ol;V.prototype.Im=function(a){return this.Qa(Wr,a)};V.prototype.getSearchService=V.prototype.Im;function Xr(a){this.f=!!a.toBypassToken;if(!this.f&&!a.token)throw new D(Xr,0,'\"token\" must be specified');Xr.l.constructor.call(this,Xr,a);this.m=a.token;this.g={};this.c={}}u(Xr,Op);t(\"H.service.xyz.Service\",Xr);Xr.prototype.a=function(){return{host:\"xyz.api.here.com\",path:\"hub/spaces\"}};Xr.prototype.b=function(a){return Error(a.errorMessage||a.message)};\nXr.prototype.Xg=function(a,b,c){xc(a,\"String\",this.Xg,0,'\"projectId\" must be a string');Yr(this.Xg,1,b,c);a=Zr(this.D().clone().sd(\"project-api/projects/\"+a));return this.I(a,b,c)};Xr.prototype.getProject=Xr.prototype.Xg;Xr.prototype.xj=function(a,b,c){Yr(this.xj,0,a,b);c=$r(this,this.D().clone().G(c||{}));return this.I(c,a,b)};Xr.prototype.getSpaces=Xr.prototype.xj;\nXr.prototype.zf=function(a,b,c){xc(a,\"String\",this.zf,0,'\"spaceId\" must be a string');Yr(this.zf,1,b,c);a=$r(this,this.D().clone().J(a));return this.I(a,b,c)};Xr.prototype.getSpace=Xr.prototype.zf;Xr.prototype.Md=function(a,b,c){xc(a,\"String\",this.Md,0,'\"spaceId\" must be a string');Yr(this.Md,1,b,c);a=$r(this,this.D().clone().J(a+\"/statistics\"));return this.I(a,b,c)};Xr.prototype.getStatistics=Xr.prototype.Md;\nXr.prototype.uf=function(a,b,c,d,e,f,g){a=$r(this,this.D().clone().J(d+\"/tile/web/\"+c+\"_\"+a+\"_\"+b+\".mvtf\").G(Object.assign({clip:!0},g)));return this.I(a,function(h){return h.arrayBuffer().then(e)},f,\"arraybuffer\")};Xr.prototype.search=function(a,b,c,d){xc(a,\"String\",this.search,0,'\"spaceId\" must be a string');Yr(this.search,1,b,c);a=$r(this,this.D().clone().J(a+\"/search\").G(d||{}));return this.I(a,b,c)};Xr.prototype.search=Xr.prototype.search;\nXr.prototype.Mc=function(a,b,c,d){xc(a,\"String\",this.Mc,0,'\"spaceId\" must be a string');if(!Ea(b))throw new D(this.Mc,1,'\"params\" must be an object');Yr(this.Mc,2,c,d);a=$r(this,this.D().clone().J(a+\"/features\").G(b));return this.I(a,c,d)};Xr.prototype.getFeaturesById=Xr.prototype.Mc;\nXr.prototype.Fd=function(a,b,c,d){xc(a,\"String\",this.Fd,0,'\"spaceId\" must be a string');if(!Ea(b))throw new D(this.Mc,1,'\"params\" must be an object');Yr(this.Fd,2,c,d);a=$r(this,this.D().clone().J(a+\"/bbox\").G(b));return this.I(a,c,d)};Xr.prototype.getFeaturesByBoundingBox=Xr.prototype.Fd;Xr.prototype.la=function(a){var b=this.g[a];if(b)return b;this.c[a]||as(this,a);return null};\nXr.prototype.Uc=function(a,b,c,d,e){xc(a,\"String\",this.Uc,0,'\"spaceId\" must be a string');if(!Ea(b))throw new D(this.Uc,1,'\"geojsonObject\" must be an object');Yr(this.Uc,2,c,d);if(e&&!Ea(e))throw new D(this.Uc,4,'\"opt_params\" must be an object');return bs(this,a,c,d,\"PUT\",b,e)};Xr.prototype.putFeatures=Xr.prototype.Uc;\nXr.prototype.Sc=function(a,b,c,d,e){xc(a,\"String\",this.Sc,0,'\"spaceId\" must be a string');if(!Ea(b))throw new D(this.Sc,1,'\"featureCollection\" must be an object');Yr(this.Sc,2,c,d);if(e&&!Ea(e))throw new D(this.Sc,4,'\"opt_params\" must be an object');return bs(this,a,c,d,\"POST\",b,e)};Xr.prototype.postFeatures=Xr.prototype.Sc;\nXr.prototype.cd=function(a,b,c,d){xc(a,\"String\",this.cd,0,'\"spaceId\" must be a string');if(!Ea(b))throw new D(this.cd,1,'\"params\" must be an object');Yr(this.cd,2,c,d);return bs(this,a,c,d,\"DELETE\",B,b)};Xr.prototype.deleteFeatures=Xr.prototype.cd;\nfunction bs(a,b,c,d,e,f,g){var h=Object.assign(a.f?{}:{authorization:\"Bearer \"+a.m},{\"Content-Type\":\"application/geo+json\"},a.i);e={method:e,headers:h};f&&(e.data=JSON.stringify(f));b=Zr(a.D().clone().J(b+\"/features\").G(g||{}));f=new tf(\"application/json\",b.toString(),he,e);f.then(c,Qp(a,b,d));return f}function as(a,b){a.c[b]=cs;a.zf(b,function(c){a.c[b]=ds;a.g[b]=c.copyright;a.dispatchEvent(\"copyrightupdate\")},function(c){a.c[b]=es;throw c;})}\nfunction $r(a,b){return a.f?b:Zr(b).G({access_token:a.m})}function Zr(a){var b=Object.assign({},a.getQuery());delete b.apikey;return a.eg(b)}Xr.CONFIG_KEY=\"xyz\";var cs=1,ds=2,es=-1;function Yr(a,b,c,d){if(!Da(c))throw new D(a,b,'\"onResult\" must be a function');if(!Da(d))throw new D(a,b+1,'\"onError\" must be a function');}V.prototype.Aj=function(a){rp(V.prototype.Aj,\"Use HERE IML service instead.\");return this.Qa(Xr,a)};V.prototype.getXYZService=V.prototype.Aj;function fs(a,b,c){var d;fs.l.constructor.call(this,c?{min:c.min,max:c.max,engineType:c.engineType}:void 0);C(a,Xr,fs,0);if(!Ac(b))throw new D(fs,1,'\"spaceId\" must be a string');this.u=a;this.b=b;this.i={};if(c&&([\"limit\",\"simplificationLevel\",\"tags\"].forEach(function(e){e in c&&(this.i[e]=c[e])},this),a=c.parameters))for(d in a)this.i[d]=a[d];this.Ob(this.c===ik.WEBGL?new qi({sources:{xyz:{type:\"MVT\"}},layers:{xyz:{data:{source:\"xyz\",layer:this.b},points:{filter:{$geometry:\"point\"},draw:{points:{collide:!1,\norder:200,color:\"#92CF48\",size:[[10,\"8px\"],[14,\"12px\"],[18,\"16px\"]]}}},polygons:{filter:{$geometry:\"polygon\"},draw:{polygons:{order:201,color:\"#E39E3C\"},lines:{order:202,color:\"#755DA5\",width:\"1px\"}}},lines:{filter:{$geometry:\"line\"},draw:{lines:{order:203,color:\"#000000\",width:\"2px\",join:\"round\",cap:\"round\"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.b,when:[\"==\",[\"geometry-type\"],\"Point\"],technique:\"circles\",renderOrder:200,color:\"#92CF48\",size:[\"interpolate\",[\"linear\"],[\"zoom\"],10,\n8,14,12,18,16]},{layer:this.b,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"fill\",color:\"#E39E3C\",renderOrder:201},{layer:this.b,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"solid-line\",color:\"#755DA5\",lineWidth:\"1px\",renderOrder:202},{layer:this.b,when:[\"==\",[\"geometry-type\"],\"LineString\"],technique:\"solid-line\",color:\"#000000\",lineWidth:\"2px\",renderOrder:203}]}))}u(fs,R);t(\"H.service.xyz.Provider\",fs);fs.prototype.I=function(a,b,c,d,e){return this.u.uf(a,b,c,this.b,d,e,this.i)};\nfs.prototype.requestInternal=fs.prototype.I;fs.prototype.la=function(){return this.u.la(this.b)};fs.prototype.getCopyrights=fs.prototype.la;fs.prototype.ld=ff;fs.prototype.providesOMV=fs.prototype.ld;fs.prototype.oa=function(){return this.fb()};fs.prototype.getStyle=fs.prototype.oa;fs.prototype.bc=function(a){C(a,qi)&&a.b(\"MVT\");this.Ob(a)};fs.prototype.setStyle=fs.prototype.bc;t(\"H.service.buildInfo\",function(){return Hf(\"H-service\",\"1.34.1\",\"7cc2bbe66\",{region:\"row\"})});\n");