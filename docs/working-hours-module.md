# –ú–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ä–æ–±–æ—á–∏–º —á–∞—Å–æ–º –±–æ—Ç–∞

## –û–≥–ª—è–¥

–ú–æ–¥—É–ª—å –¥–æ–∑–≤–æ–ª—è—î –∫–µ—Ä—É–≤–∞—Ç–∏ —Ä–æ–±–æ—á–∏–º —á–∞—Å–æ–º Telegram-–±–æ—Ç–∞: –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —Ç–∏–∂–Ω–µ–≤–∏–π –≥—Ä–∞—Ñ—ñ–∫, –ø–ª–∞–Ω—É–≤–∞—Ç–∏ —Ç–∏–º—á–∞—Å–æ–≤—ñ –∑–∞–∫—Ä–∏—Ç—Ç—è, –∞–∫—Ç–∏–≤—É–≤–∞—Ç–∏ —à–≤–∏–¥–∫—É –ø–∞—É–∑—É —Ç–∞ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤ —É –Ω–µ—Ä–æ–±–æ—á–∏–π —á–∞—Å.

---

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

–¢—Ä–∏ —Ç–∞–±–ª–∏—Ü—ñ –≤ –±–∞–∑—ñ `mysql_ecopizza`:

| –¢–∞–±–ª–∏—Ü—è | –û–ø–∏—Å |
|---------|------|
| `bot_working_hours_schedule` | –¢–∏–∂–Ω–µ–≤–∏–π –≥—Ä–∞—Ñ—ñ–∫ (7 –∑–∞–ø–∏—Å—ñ–≤, –ü–Ω-–ù–¥) |
| `bot_working_hours_closures` | –¢–∏–º—á–∞—Å–æ–≤—ñ –∑–∞–∫—Ä–∏—Ç—Ç—è (–∑–∞–ø–ª–∞–Ω–æ–≤–∞–Ω—ñ –ø–µ—Ä–µ—Ä–≤–∏) |
| `bot_working_hours_settings` | –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–æ–¥—É–ª—è (key-value) |

### –§–∞–π–ª–∏ –º–æ–¥—É–ª—è

| –§–∞–π–ª | –û–ø–∏—Å |
|------|------|
| `database/migrations/2026_02_02_000001_create_bot_working_hours_tables.php` | –ú—ñ–≥—Ä–∞—Ü—ñ—è |
| `app/Models/WorkingHoursSchedule.php` | –ú–æ–¥–µ–ª—å —Ç–∏–∂–Ω–µ–≤–æ–≥–æ –≥—Ä–∞—Ñ—ñ–∫—É |
| `app/Models/WorkingHoursClosure.php` | –ú–æ–¥–µ–ª—å —Ç–∏–º—á–∞—Å–æ–≤–∏—Ö –∑–∞–∫—Ä–∏—Ç—Ç—ñ–≤ |
| `app/Models/WorkingHoursSettings.php` | –ú–æ–¥–µ–ª—å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å |
| `app/Services/WorkingHoursService.php` | –°–µ—Ä–≤—ñ—Å –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∏ |
| `app/Http/Controllers/BotSettingsWorkingHoursController.php` | –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—ñ |
| `resources/views/admin/settings_working_hours_content.blade.php` | Blade-—à–∞–±–ª–æ–Ω –∞–¥–º—ñ–Ω–∫–∏ |

### –ó–º—ñ–Ω–µ–Ω—ñ —ñ—Å–Ω—É—é—á—ñ —Ñ–∞–π–ª–∏

| –§–∞–π–ª | –©–æ –∑–º—ñ–Ω–µ–Ω–æ |
|------|------------|
| `routes/web.php` | –î–æ–¥–∞–Ω–æ 8 –º–∞—Ä—à—Ä—É—Ç—ñ–≤ –¥–ª—è –º–æ–¥—É–ª—è |
| `resources/views/admin/sidemenu_bot_content.blade.php` | –ü—É–Ω–∫—Ç –º–µ–Ω—é "–†–æ–±–æ—á–∏–π —á–∞—Å" |
| `resources/views/admin/bot_content.blade.php` | –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —à–∞–±–ª–æ–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫–∏ |
| `app/Http/Controllers/Telegram/BotMenuNewController.php` | –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—á–æ–≥–æ —á–∞—Å—É –ø—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ –≤ –∫–æ—à–∏–∫, –≤–∏–±–æ—Ä—ñ —á–∞—Å—É, –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è |
| `app/Http/Controllers/TelegramController.php` | –ü–æ–≤–Ω–µ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –±–æ—Ç–∞ —É webhook |
| `app/Http/Controllers/Telegram/BotDateTimeController.php` | –ú—ñ–≥—Ä–∞—Ü—ñ—è –∑ `bot_settings_date_not_work` –Ω–∞ –Ω–æ–≤—ñ —Ç–∞–±–ª–∏—Ü—ñ |
| `resources/views/telegram/main.blade.php` | –ë–∞–Ω–µ—Ä –Ω–µ—Ä–æ–±–æ—á–æ–≥–æ —á–∞—Å—É –Ω–∞ –≥–æ–ª–æ–≤–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ webapp |
| `resources/views/telegram/confetti_button.blade.php` | –û–±—Ä–æ–±–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ `working_hours_closed` –ø—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ –≤ –∫–æ—à–∏–∫ |
| `resources/views/telegram/product.blade.php` | –û–±—Ä–æ–±–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ `working_hours_closed` –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ —Ç–æ–≤–∞—Ä—É |

---

## –õ–æ–≥—ñ–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ä–æ–±–æ—á–æ–≥–æ —á–∞—Å—É

–ú–µ—Ç–æ–¥ `WorkingHoursService::isCurrentlyOpen()` –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Å—Ç–∞–Ω –∑–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∞–º–∏:

1. **–ú–æ–¥—É–ª—å –≤–∏–º–∫–Ω–µ–Ω–∏–π** (`enabled = 0`) -> –±–æ—Ç –∑–∞–≤–∂–¥–∏ –ø—Ä–∞—Ü—é—î
2. **–®–≤–∏–¥–∫–∞ –ø–∞—É–∑–∞** (–Ω–∞–π–≤–∏—â–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç) -> –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ `quick_pause_active` + `quick_pause_end`
3. **–¢–∏–º—á–∞—Å–æ–≤–µ –∑–∞–∫—Ä–∏—Ç—Ç—è** -> –ø–æ—à—É–∫ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–∞–∫—Ä–∏—Ç—Ç—è –¥–µ –ø–æ—Ç–æ—á–Ω–∏–π —á–∞—Å –º—ñ–∂ `start_datetime` —ñ `end_datetime`
4. **–¢–∏–∂–Ω–µ–≤–∏–π –≥—Ä–∞—Ñ—ñ–∫** -> –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–Ω—è —Ç–∏–∂–Ω—è, `is_working_day`, `open_time`, `close_time`

–ü–æ–≤–µ—Ä—Ç–∞—î –º–∞—Å–∏–≤:
```php
[
    'is_open' => bool,
    'reason' => string|null,
    'next_open' => string|null,     // datetime –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è
    'closure_type' => string|null,  // quick_pause, scheduled, schedule_day_off, schedule_before_open, schedule_after_close
]
```

---

## –†–µ–∂–∏–º–∏ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è

### 1. –¢—ñ–ª—å–∫–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è (`orders_only`)

- –ö–ª—ñ—î–Ω—Ç –º–æ–∂–µ –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –º–µ–Ω—é, –¥–æ–¥–∞–≤–∞—Ç–∏ —Ç–æ–≤–∞—Ä–∏ –≤ –∫–æ—à–∏–∫ (—è–∫—â–æ `allow_future_orders = 1`)
- –ü—Ä–∏ —Å–ø—Ä–æ–±—ñ –æ—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ –Ω–µ—Ä–æ–±–æ—á–∏–π —á–∞—Å
- –ù–∞ –≥–æ–ª–æ–≤–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ webapp –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –±–∞–Ω–µ—Ä –∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é

### 2. –ü–æ–≤–Ω–µ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è (`full`)

- –ù–∞ –±—É–¥—å-—è–∫–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ Telegram –±–æ—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º –ø—Ä–æ –Ω–µ—Ä–æ–±–æ—á–∏–π —á–∞—Å
- –í–∏–∫–ª—é—á–µ–Ω–Ω—è: –∫–æ–º–∞–Ω–¥–∞ `/start` –∑–∞–≤–∂–¥–∏ –ø—Ä–∞—Ü—é—î (—â–æ–± –Ω–µ –≤—Ç—Ä–∞—á–∞—Ç–∏ –Ω–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤)
- –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –Ω–∞ —Ä—ñ–≤–Ω—ñ webhook —É `TelegramController`

---

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–æ–¥—É–ª—è

| –ö–ª—é—á | –ó–Ω–∞—á–µ–Ω–Ω—è | –û–ø–∏—Å |
|------|----------|------|
| `enabled` | `1` / `0` | –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è –º–æ–¥—É–ª—è |
| `blocking_mode` | `orders_only` / `full` | –†–µ–∂–∏–º –±–ª–æ–∫—É–≤–∞–Ω–Ω—è |
| `allow_future_orders` | `1` / `0` | –î–æ–∑–≤–æ–ª–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞ —ñ–Ω—à–∏–π —á–∞—Å —É –Ω–µ—Ä–æ–±–æ—á–∏–π —á–∞—Å |
| `quick_pause_active` | `1` / `0` | –®–≤–∏–¥–∫–∞ –ø–∞—É–∑–∞ –∞–∫—Ç–∏–≤–Ω–∞ |
| `quick_pause_end` | datetime | –ß–∞—Å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø–∞—É–∑–∏ |
| `quick_pause_reason` | text | –ü—Ä–∏—á–∏–Ω–∞ –ø–∞—É–∑–∏ |
| `message_title` | text | –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤ |
| `message_text` | text | –¢–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (–ø—ñ–¥—Ç—Ä–∏–º–∫–∞ HTML-—Ç–µ–≥—ñ–≤ Telegram) |

### –û–ø—Ü—ñ—è "–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞ —ñ–Ω—à–∏–π —á–∞—Å" (`allow_future_orders`)

–ö–æ–ª–∏ —É–≤—ñ–º–∫–Ω–µ–Ω–∞ (`1`):
- –ö–ª—ñ—î–Ω—Ç–∏ –º–æ–∂—É—Ç—å –¥–æ–¥–∞–≤–∞—Ç–∏ —Ç–æ–≤–∞—Ä–∏ –≤ –∫–æ—à–∏–∫ –Ω–∞–≤—ñ—Ç—å —É –Ω–µ—Ä–æ–±–æ—á–∏–π —á–∞—Å
- –ú–æ–∂—É—Ç—å –æ—Ñ–æ—Ä–º–ª—é–≤–∞—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è, –æ–±–∏—Ä–∞—é—á–∏ –¥–∞—Ç—É —Ç–∞ —á–∞—Å –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–∞ —Ä–æ–±–æ—á–∏–π –¥–µ–Ω—å
- –ù–∞ –≥–æ–ª–æ–≤–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ webapp –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –±–∞–Ω–µ—Ä –∑ —Ç–µ–∫—Å—Ç–æ–º "–í–∏ –º–æ–∂–µ—Ç–µ –∑—Ä–æ–±–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞ —ñ–Ω—à–∏–π —á–∞—Å"

–ö–æ–ª–∏ –≤–∏–º–∫–Ω–µ–Ω–∞ (`0`):
- –ü—Ä–∏ —Å–ø—Ä–æ–±—ñ –¥–æ–¥–∞—Ç–∏ —Ç–æ–≤–∞—Ä –≤ –∫–æ—à–∏–∫ —É –Ω–µ—Ä–æ–±–æ—á–∏–π —á–∞—Å –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º
- –û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø–æ–≤–Ω—ñ—Å—Ç—é –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–µ

---

## –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å

–î–æ—Å—Ç—É–ø: **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ -> –†–æ–±–æ—á–∏–π —á–∞—Å** (–ø–æ—Ç—Ä—ñ–±–µ–Ω –¥–æ–∑–≤—ñ–ª `settings`)

### –°—Ç–∞—Ç—É—Å-–±–ª–æ–∫ (–∑–∞–≤–∂–¥–∏ –≤–∏–¥–Ω–æ)
- –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä: "–ë–æ—Ç –∑–∞—Ä–∞–∑ –ü–†–ê–¶–Æ–Ñ" (–∑–µ–ª–µ–Ω–∏–π) / "–ù–ï –ü–†–ê–¶–Æ–Ñ" (—á–µ—Ä–≤–æ–Ω–∏–π)
- –ü—Ä–∏—á–∏–Ω–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è —Ç–∞ —á–∞—Å –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è
- –ö–Ω–æ–ø–∫–∞ "–®–≤–∏–¥–∫–∞ –ø–∞—É–∑–∞" / "–í—ñ–¥–Ω–æ–≤–∏—Ç–∏ —Ä–æ–±–æ—Ç—É"

### –í–∫–ª–∞–¥–∫–∞ "–¢–∏–∂–Ω–µ–≤–∏–π –≥—Ä–∞—Ñ—ñ–∫"
- –¢–∞–±–ª–∏—Ü—è 7 –¥–Ω—ñ–≤ (–ü–Ω-–ù–¥)
- –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –¥–Ω—è: —á–µ–∫–±–æ–∫—Å "–†–æ–±–æ—á–∏–π –¥–µ–Ω—å", —á–∞—Å –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è, —á–∞—Å –∑–∞–∫—Ä–∏—Ç—Ç—è

### –í–∫–ª–∞–¥–∫–∞ "–¢–∏–º—á–∞—Å–æ–≤—ñ –∑–∞–∫—Ä–∏—Ç—Ç—è"
- –°–ø–∏—Å–æ–∫ –∑–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–∏—Ö –∑–∞–∫—Ä–∏—Ç—Ç—ñ–≤
- –î–æ–¥–∞–≤–∞–Ω–Ω—è/—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ
- –ü–æ–ª—è: –ø–æ—á–∞—Ç–æ–∫, –∫—ñ–Ω–µ—Ü—å, –ø—Ä–∏—á–∏–Ω–∞, –∞–∫—Ç–∏–≤–Ω–µ

### –í–∫–ª–∞–¥–∫–∞ "–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è"
- –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è –º–æ–¥—É–ª—è
- –†–µ–∂–∏–º –±–ª–æ–∫—É–≤–∞–Ω–Ω—è
- –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞ —ñ–Ω—à–∏–π —á–∞—Å
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∞ —Ç–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

---

## –ú–∞—Ä—à—Ä—É—Ç–∏

```
GET  /admin/bot/settings_working_hours                  -> —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –º–æ–¥—É–ª—è
POST /admin/bot/settings_working_hours_schedule_save     -> –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫—É
POST /admin/bot/settings_working_hours_closure_save      -> –¥–æ–¥–∞–≤–∞–Ω–Ω—è/—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∑–∞–∫—Ä–∏—Ç—Ç—è
POST /admin/bot/settings_working_hours_closure_delete    -> –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞–∫—Ä–∏—Ç—Ç—è
POST /admin/bot/settings_working_hours_settings_save     -> –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å
POST /admin/bot/settings_working_hours_quick_pause       -> –∞–∫—Ç–∏–≤–∞—Ü—ñ—è —à–≤–∏–¥–∫–æ—ó –ø–∞—É–∑–∏
POST /admin/bot/settings_working_hours_resume_pause      -> –∑–Ω—è—Ç—Ç—è –ø–∞—É–∑–∏
GET  /admin/bot/settings_working_hours_status            -> AJAX: –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞—Ç—É—Å (JSON)
```

---

## –î–µ–ø–ª–æ–π –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω

### –ö—Ä–æ–∫ 1. –ó–∞–ª–∏—Ç–∏ —Ñ–∞–π–ª–∏

–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –≤—Å—ñ –Ω–æ–≤—ñ —Ç–∞ –∑–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Å–µ—Ä–≤–µ—Ä.

### –ö—Ä–æ–∫ 2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é

```bash
php artisan migrate
```

–ú—ñ–≥—Ä–∞—Ü—ñ—è —Å—Ç–≤–æ—Ä–∏—Ç—å 3 —Ç–∞–±–ª–∏—Ü—ñ –≤ –±–∞–∑—ñ `mysql_ecopizza` —Ç–∞ –∑–∞–ø–æ–≤–Ω–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏:
- –ì—Ä–∞—Ñ—ñ–∫: –ü–Ω-–ü—Ç 09:00-22:00, –°–±-–ù–¥ 10:00-21:00 (–≤—Å—ñ –¥–Ω—ñ —Ä–æ–±–æ—á—ñ)
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è: –º–æ–¥—É–ª—å —É–≤—ñ–º–∫–Ω–µ–Ω–∏–π, —Ä–µ–∂–∏–º "—Ç—ñ–ª—å–∫–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è"

### –ö—Ä–æ–∫ 3. –î–æ–¥–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è `allow_future_orders`

–¶–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±—É–ª–æ –¥–æ–¥–∞–Ω–æ –ø—ñ—Å–ª—è –æ—Å–Ω–æ–≤–Ω–æ—ó –º—ñ–≥—Ä–∞—Ü—ñ—ó. –î–æ–¥–∞—Ç–∏ —á–µ—Ä–µ–∑ tinker:

```bash
php artisan tinker
```

```php
\App\Services\WorkingHoursService::setSetting('allow_future_orders', '1');
```

–ê–±–æ —á–µ—Ä–µ–∑ SQL –≤ –±–∞–∑—ñ `mysql_ecopizza`:

```sql
INSERT INTO bot_working_hours_settings (setting_name, setting_value, created_at, updated_at)
VALUES ('allow_future_orders', '1', NOW(), NOW());
```

### –ö—Ä–æ–∫ 4. –û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à

```bash
php artisan config:clear
php artisan route:clear
php artisan cache:clear
composer dump-autoload
```

### –ö—Ä–æ–∫ 5. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–∞–≤–∞ –Ω–∞ –ª–æ–≥–∏

–ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è —â–æ —Ñ–∞–π–ª –ª–æ–≥—ñ–≤ –Ω–∞–ª–µ–∂–∏—Ç—å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä—É:

```bash
chown www-data:www-data storage/logs/laravel-*.log
# –∞–±–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∞—à–æ–≥–æ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
```

### –ö—Ä–æ–∫ 6. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–æ–±–æ—Ç—É

1. –ê–¥–º—ñ–Ω–∫–∞: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -> –†–æ–±–æ—á–∏–π —á–∞—Å -> –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è
2. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ä–µ–∞–ª—å–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫ —Ä–æ–±–æ—Ç–∏, –∑–±–µ—Ä–µ–≥—Ç–∏
3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å "–ë–æ—Ç –∑–∞—Ä–∞–∑ –ü–†–ê–¶–Æ–Ñ"
4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ webapp: –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤ –≤ –∫–æ—à–∏–∫ –ø—Ä–∞—Ü—é—î
5. –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ —à–≤–∏–¥–∫—É –ø–∞—É–∑—É -> –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ —Å—Ç–∞—Ç—É—Å –∑–º—ñ–Ω–∏–≤—Å—è -> –≤—ñ–¥–Ω–æ–≤–∏—Ç–∏ —Ä–æ–±–æ—Ç—É

---

## –°—Ç–∞—Ä–∞ —Ç–∞–±–ª–∏—Ü—è `bot_settings_date_not_work`

–¢–∞–±–ª–∏—Ü—è –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –≤ –±–∞–∑—ñ, –∞–ª–µ –±—ñ–ª—å—à–µ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è. –ö–æ–¥ `BotDateTimeController` –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–∏–π –Ω–∞ –Ω–æ–≤—ñ —Ç–∞–±–ª–∏—Ü—ñ:

| –°—Ç–∞—Ä–∏–π –º–µ—Ç–æ–¥ | –î–∂–µ—Ä–µ–ª–æ –¥–∞–Ω–∏—Ö |
|-------------|---------------|
| `getDaysNotWork()` | `bot_working_hours_closures` + `bot_working_hours_schedule` |
| `getArrDaysNotWork()` | `bot_working_hours_closures` |
| `getTimeNotWork()` | `bot_working_hours_schedule` + `bot_working_hours_closures` |
| `getArrTimesNotWorkAllDays()` | `bot_working_hours_closures` |

–°—Ç–∞—Ä—É —Ç–∞–±–ª–∏—Ü—é –º–æ–∂–Ω–∞ –≤–∏–¥–∞–ª–∏—Ç–∏ –ø—ñ—Å–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —â–æ –≤—Å–µ –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ.

---

## –§–æ—Ä–º–∞—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç—É

–ü—Ä–∏ –Ω–µ—Ä–æ–±–æ—á–æ–º—É —á–∞—Å—ñ –±–æ—Ç –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —É —Ñ–æ—Ä–º–∞—Ç—ñ:

```
üïê {message_title}

{message_text}

üìã {reason}          <- —è–∫—â–æ —î –ø—Ä–∏—á–∏–Ω–∞

‚è∞ –ù–∞—Å—Ç—É–ø–Ω–µ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è: {next_open}   <- —è–∫—â–æ –≤—ñ–¥–æ–º–æ
```

–ü—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è HTML-—Ç–µ–≥–∏ Telegram: `<b>`, `<i>`, `<a>`, `<code>`.
